<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1203px" preserveAspectRatio="none" style="width:3040px;height:1203px;" version="1.1" viewBox="0 0 3040 1203" width="3040px" zoomAndPan="magnify"><defs><filter height="300%" id="f9z9rm7dx0h8y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster org.apache.spark.sql--><polygon fill="#FFFFFF" filter="url(#f9z9rm7dx0h8y)" points="2216,118,2366,118,2373,140.4883,2506,140.4883,2506,378,2216,378,2216,118" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2216" x2="2373" y1="140.4883" y2="140.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="2220" y="133.5352">org.apache.spark.sql</text><!--cluster edu.berkeley.cs.rise.opaque--><polygon fill="#FFFFFF" filter="url(#f9z9rm7dx0h8y)" points="22,427,221,427,228,449.4883,3018,449.4883,3018,1191,22,1191,22,427" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="228" y1="449.4883" y2="449.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="26" y="442.5352">edu.berkeley.cs.rise.opaque</text><!--cluster edu.berkeley.cs.rise.opaque.benchmark--><polygon fill="#FFFFFF" filter="url(#f9z9rm7dx0h8y)" points="46,470,131,470,138,492.4883,2491.5,492.4883,2491.5,1167,46,1167,46,470" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="138" y1="492.4883" y2="492.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="50" y="485.5352">benchmark</text><!--cluster edu.xjtu.cs.cyx.qshield--><polygon fill="#FFFFFF" filter="url(#f9z9rm7dx0h8y)" points="213,24,376,24,383,46.4883,2188,46.4883,2188,403,213,403,213,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="213" x2="383" y1="46.4883" y2="46.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="217" y="39.5352">edu.xjtu.cs.cyx.qshield</text><!--cluster edu.xjtu.cs.cyx.qshield.benchmark--><polygon fill="#FFFFFF" filter="url(#f9z9rm7dx0h8y)" points="237,67,322,67,329,89.4883,1556.5,89.4883,1556.5,379,237,379,237,67" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="237" x2="329" y1="89.4883" y2="89.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="241" y="82.5352">benchmark</text><!--class org.apache.spark.sql.OpaqueDatasetFunctions--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="org.apache.spark.sql.OpaqueDatasetFunctions" style="stroke: #A80036; stroke-width: 1.5;" width="258" x="2232" y="153"/><ellipse cx="2285.25" cy="172.1328" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2287.7231,178.2759 Q2287.1421,178.5747 2286.5029,178.7241 Q2285.8638,178.8735 2285.1582,178.8735 Q2282.6514,178.8735 2281.3315,177.2217 Q2280.0117,175.5698 2280.0117,172.4487 Q2280.0117,169.3193 2281.3315,167.6675 Q2282.6514,166.0156 2285.1582,166.0156 Q2285.8638,166.0156 2286.5112,166.165 Q2287.1587,166.3145 2287.7231,166.6133 L2287.7231,169.3359 Q2287.0923,168.7549 2286.4988,168.4851 Q2285.9053,168.2153 2285.2744,168.2153 Q2283.9297,168.2153 2283.2449,169.282 Q2282.5601,170.3486 2282.5601,172.4487 Q2282.5601,174.5405 2283.2449,175.6072 Q2283.9297,176.6738 2285.2744,176.6738 Q2285.9053,176.6738 2286.4988,176.4041 Q2287.0923,176.1343 2287.7231,175.5532 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="2338.25" y="169.6016">«Serializable»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="2305.75" y="183.7344">OpaqueDatasetFunctions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2233" x2="2489" y1="191.2656" y2="191.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2233" x2="2489" y1="199.2656" y2="199.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="2252" y="213.9004">OpaqueDatasetFunctions[T](ds: Dataset[T])</text><ellipse cx="2243" cy="224.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="2252" y="226.8555">encrypted(): DataFrame</text><!--class org.apache.spark.sql.QShieldDatasetFunctions--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="93.1309" id="org.apache.spark.sql.QShieldDatasetFunctions" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="2232.5" y="268.5"/><ellipse cx="2286.75" cy="287.6328" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2289.2231,293.7759 Q2288.6421,294.0747 2288.0029,294.2241 Q2287.3638,294.3735 2286.6582,294.3735 Q2284.1514,294.3735 2282.8315,292.7217 Q2281.5117,291.0698 2281.5117,287.9487 Q2281.5117,284.8193 2282.8315,283.1675 Q2284.1514,281.5156 2286.6582,281.5156 Q2287.3638,281.5156 2288.0112,281.665 Q2288.6587,281.8145 2289.2231,282.1133 L2289.2231,284.8359 Q2288.5923,284.2549 2287.9988,283.9851 Q2287.4053,283.7153 2286.7744,283.7153 Q2285.4297,283.7153 2284.7449,284.782 Q2284.0601,285.8486 2284.0601,287.9487 Q2284.0601,290.0405 2284.7449,291.1072 Q2285.4297,292.1738 2286.7744,292.1738 Q2287.4053,292.1738 2287.9988,291.9041 Q2288.5923,291.6343 2289.2231,291.0532 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="2338.25" y="285.1016">«Serializable»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="2307.25" y="299.2344">QShieldDatasetFunctions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2233.5" x2="2488.5" y1="306.7656" y2="306.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2233.5" x2="2488.5" y1="314.7656" y2="314.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231" x="2252.5" y="329.4004">QShieldDatasetFunctions[T](ds: Dataset[T])</text><ellipse cx="2243.5" cy="339.6982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231" x="2252.5" y="342.3555">acPolicyApplied(tk: Array[Byte]): DataFrame</text><ellipse cx="2243.5" cy="352.6533" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="2252.5" y="355.3105">resPrepared() : DataFrame</text><!--class edu.berkeley.cs.rise.opaque.implicits--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="67.2207" id="edu.berkeley.cs.rise.opaque.implicits" style="stroke: #A80036; stroke-width: 1.5;" width="452" x="2550" y="565.5"/><ellipse cx="2748.25" cy="584.6328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2747.8633,580.7153 Q2746.9253,580.7153 2746.4937,581.7156 Q2746.062,582.7158 2746.062,584.9487 Q2746.062,587.1733 2746.4937,588.1736 Q2746.9253,589.1738 2747.8633,589.1738 Q2748.8096,589.1738 2749.2412,588.1736 Q2749.6729,587.1733 2749.6729,584.9487 Q2749.6729,582.7158 2749.2412,581.7156 Q2748.8096,580.7153 2747.8633,580.7153 Z M2743.5137,584.9487 Q2743.5137,581.7695 2744.6135,580.1426 Q2745.7134,578.5156 2747.8633,578.5156 Q2750.0215,578.5156 2751.1213,580.1426 Q2752.2212,581.7695 2752.2212,584.9487 Q2752.2212,588.1196 2751.1213,589.7466 Q2750.0215,591.3735 2747.8633,591.3735 Q2745.7134,591.3735 2744.6135,589.7466 Q2743.5137,588.1196 2743.5137,584.9487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="2767.25" y="582.1016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="2768.75" y="596.2344">implicits</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2551" x2="3001" y1="603.7656" y2="603.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2551" x2="3001" y1="611.7656" y2="611.7656"/><ellipse cx="2561" cy="623.7432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="426" x="2570" y="626.4004">datasetToOpaqueDatasetFunctions[T](ds: Dataset[T]): OpaqueDatasetFunctions</text><!--class edu.berkeley.cs.rise.opaque.benchmark.Benchmark--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="edu.berkeley.cs.rise.opaque.benchmark.Benchmark" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="1273.5" y="603"/><ellipse cx="1334.25" cy="622.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1333.8633,618.2153 Q1332.9253,618.2153 1332.4937,619.2156 Q1332.062,620.2158 1332.062,622.4487 Q1332.062,624.6733 1332.4937,625.6736 Q1332.9253,626.6738 1333.8633,626.6738 Q1334.8096,626.6738 1335.2412,625.6736 Q1335.6729,624.6733 1335.6729,622.4487 Q1335.6729,620.2158 1335.2412,619.2156 Q1334.8096,618.2153 1333.8633,618.2153 Z M1329.5137,622.4487 Q1329.5137,619.2695 1330.6135,617.6426 Q1331.7134,616.0156 1333.8633,616.0156 Q1336.0215,616.0156 1337.1213,617.6426 Q1338.2212,619.2695 1338.2212,622.4487 Q1338.2212,625.6196 1337.1213,627.2466 Q1336.0215,628.8735 1333.8633,628.8735 Q1331.7134,628.8735 1330.6135,627.2466 Q1329.5137,625.6196 1329.5137,622.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="1361.75" y="619.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="1354.75" y="633.7344">Benchmark</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1274.5" x2="1466.5" y1="641.2656" y2="641.2656"/><ellipse cx="1284.5" cy="653.2432" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="1293.5" y="655.9004">dataDir : String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1274.5" x2="1466.5" y1="662.2207" y2="662.2207"/><ellipse cx="1284.5" cy="674.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="1293.5" y="676.8555">main(args : Array[String]) : Unit</text><!--class edu.berkeley.cs.rise.opaque.benchmark.BigDataBenchmark--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="119.041" id="edu.berkeley.cs.rise.opaque.benchmark.BigDataBenchmark" style="stroke: #A80036; stroke-width: 1.5;" width="574" x="261" y="505.5"/><ellipse cx="489.75" cy="524.6328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M489.3633,520.7153 Q488.4253,520.7153 487.9937,521.7156 Q487.562,522.7158 487.562,524.9487 Q487.562,527.1733 487.9937,528.1736 Q488.4253,529.1738 489.3633,529.1738 Q490.3096,529.1738 490.7412,528.1736 Q491.1729,527.1733 491.1729,524.9487 Q491.1729,522.7158 490.7412,521.7156 Q490.3096,520.7153 489.3633,520.7153 Z M485.0137,524.9487 Q485.0137,521.7695 486.1135,520.1426 Q487.2134,518.5156 489.3633,518.5156 Q491.5215,518.5156 492.6213,520.1426 Q493.7212,521.7695 493.7212,524.9487 Q493.7212,528.1196 492.6213,529.7466 Q491.5215,531.3735 489.3633,531.3735 Q487.2134,531.3735 486.1135,529.7466 Q485.0137,528.1196 485.0137,524.9487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="539.25" y="522.1016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="510.25" y="536.2344">BigDataBenchmark</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="262" x2="834" y1="543.7656" y2="543.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="262" x2="834" y1="551.7656" y2="551.7656"/><ellipse cx="272" cy="563.7432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="543" x="281" y="566.4004">rankings(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="272" cy="576.6982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="548" x="281" y="579.3555">uservisits(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="272" cy="589.6533" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="510" x="281" y="592.3105">q1(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="272" cy="602.6084" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="510" x="281" y="605.2656">q2(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="272" cy="615.5635" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="510" x="281" y="618.2207">q3(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><!--class edu.berkeley.cs.rise.opaque.benchmark.KMeans--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="edu.berkeley.cs.rise.opaque.benchmark.KMeans" style="stroke: #A80036; stroke-width: 1.5;" width="761" x="167.5" y="660"/><ellipse cx="520.75" cy="679.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M520.3633,675.2153 Q519.4253,675.2153 518.9937,676.2156 Q518.562,677.2158 518.562,679.4487 Q518.562,681.6733 518.9937,682.6736 Q519.4253,683.6738 520.3633,683.6738 Q521.3096,683.6738 521.7412,682.6736 Q522.1729,681.6733 522.1729,679.4487 Q522.1729,677.2158 521.7412,676.2156 Q521.3096,675.2153 520.3633,675.2153 Z M516.0137,679.4487 Q516.0137,676.2695 517.1135,674.6426 Q518.2134,673.0156 520.3633,673.0156 Q522.5215,673.0156 523.6213,674.6426 Q524.7212,676.2695 524.7212,679.4487 Q524.7212,682.6196 523.6213,684.2466 Q522.5215,685.8735 520.3633,685.8735 Q518.2134,685.8735 517.1135,684.2466 Q516.0137,682.6196 516.0137,679.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="539.25" y="676.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="541.75" y="690.7344">KMeans</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="168.5" x2="927.5" y1="698.2656" y2="698.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="168.5" x2="927.5" y1="706.2656" y2="706.2656"/><ellipse cx="178.5" cy="718.2432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="603" x="187.5" y="720.9004">data(spark: SparkSession, securityLevel: SecurityLevel, numPartitions: Int, rand: Random, N: Int, D: Int): DataFrame</text><ellipse cx="178.5" cy="731.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="735" x="187.5" y="733.8555">train(spark: SparkSession, securityLevel: SecurityLevel, numPartitions: Int, N: Int, D: Int, K: Int, convergeDist: Double): Array[Array[Double]]</text><!--class edu.berkeley.cs.rise.opaque.benchmark.LeastSquares--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="edu.berkeley.cs.rise.opaque.benchmark.LeastSquares" style="stroke: #A80036; stroke-width: 1.5;" width="553" x="1094" y="833"/><ellipse cx="1328.25" cy="852.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1327.8633,848.2153 Q1326.9253,848.2153 1326.4937,849.2156 Q1326.062,850.2158 1326.062,852.4487 Q1326.062,854.6733 1326.4937,855.6736 Q1326.9253,856.6738 1327.8633,856.6738 Q1328.8096,856.6738 1329.2412,855.6736 Q1329.6729,854.6733 1329.6729,852.4487 Q1329.6729,850.2158 1329.2412,849.2156 Q1328.8096,848.2153 1327.8633,848.2153 Z M1323.5137,852.4487 Q1323.5137,849.2695 1324.6135,847.6426 Q1325.7134,846.0156 1327.8633,846.0156 Q1330.0215,846.0156 1331.1213,847.6426 Q1332.2212,849.2695 1332.2212,852.4487 Q1332.2212,855.6196 1331.1213,857.2466 Q1330.0215,858.8735 1327.8633,858.8735 Q1325.7134,858.8735 1324.6135,857.2466 Q1323.5137,855.6196 1323.5137,852.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="1361.75" y="849.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="1348.75" y="863.7344">LeastSquares</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1095" x2="1646" y1="871.2656" y2="871.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1095" x2="1646" y1="879.2656" y2="879.2656"/><ellipse cx="1105" cy="891.2432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="454" x="1114" y="893.9004">data(spark: SparkSession, securityLevel: SecurityLevel, numPartitions: Int): DataFrame</text><ellipse cx="1105" cy="904.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="527" x="1114" y="906.8555">query(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><!--class edu.berkeley.cs.rise.opaque.benchmark.LogisticRegression--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="edu.berkeley.cs.rise.opaque.benchmark.LogisticRegression" style="stroke: #A80036; stroke-width: 1.5;" width="686" x="205" y="775"/><ellipse cx="491.25" cy="794.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M490.8633,790.2153 Q489.9253,790.2153 489.4937,791.2156 Q489.062,792.2158 489.062,794.4487 Q489.062,796.6733 489.4937,797.6736 Q489.9253,798.6738 490.8633,798.6738 Q491.8096,798.6738 492.2412,797.6736 Q492.6729,796.6733 492.6729,794.4487 Q492.6729,792.2158 492.2412,791.2156 Q491.8096,790.2153 490.8633,790.2153 Z M486.5137,794.4487 Q486.5137,791.2695 487.6135,789.6426 Q488.7134,788.0156 490.8633,788.0156 Q493.0215,788.0156 494.1213,789.6426 Q495.2212,791.2695 495.2212,794.4487 Q495.2212,797.6196 494.1213,799.2466 Q493.0215,800.8735 490.8633,800.8735 Q488.7134,800.8735 487.6135,799.2466 Q486.5137,797.6196 486.5137,794.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="539.25" y="791.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="511.75" y="805.7344">LogisticRegression</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="206" x2="890" y1="813.2656" y2="813.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="206" x2="890" y1="821.2656" y2="821.2656"/><ellipse cx="216" cy="833.2432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="660" x="225" y="835.9004">data(spark: SparkSession, securityLevel: SecurityLevel, numPartitions: Int, rand: Random, N: Int, D: Int, R: Double): DataFrame</text><ellipse cx="216" cy="846.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="509" x="225" y="848.8555">train(spark: SparkSession, securityLevel: SecurityLevel, N: Int, numPartitions: Int): Array[Double]</text><!--class edu.berkeley.cs.rise.opaque.benchmark.PageRank--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="67.2207" id="edu.berkeley.cs.rise.opaque.benchmark.PageRank" style="stroke: #A80036; stroke-width: 1.5;" width="541" x="277.5" y="890.5"/><ellipse cx="515.25" cy="909.6328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M514.8633,905.7153 Q513.9253,905.7153 513.4937,906.7156 Q513.062,907.7158 513.062,909.9487 Q513.062,912.1733 513.4937,913.1736 Q513.9253,914.1738 514.8633,914.1738 Q515.8096,914.1738 516.2412,913.1736 Q516.6729,912.1733 516.6729,909.9487 Q516.6729,907.7158 516.2412,906.7156 Q515.8096,905.7153 514.8633,905.7153 Z M510.5137,909.9487 Q510.5137,906.7695 511.6135,905.1426 Q512.7134,903.5156 514.8633,903.5156 Q517.0215,903.5156 518.1213,905.1426 Q519.2212,906.7695 519.2212,909.9487 Q519.2212,913.1196 518.1213,914.7466 Q517.0215,916.3735 514.8633,916.3735 Q512.7134,916.3735 511.6135,914.7466 Q510.5137,913.1196 510.5137,909.9487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="539.25" y="907.1016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="535.75" y="921.2344">PageRank</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="817.5" y1="928.7656" y2="928.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="817.5" y1="936.7656" y2="936.7656"/><ellipse cx="288.5" cy="948.7432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="515" x="297.5" y="951.4004">run(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><!--class edu.berkeley.cs.rise.opaque.benchmark.TPCH--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="157.9063" id="edu.berkeley.cs.rise.opaque.benchmark.TPCH" style="stroke: #A80036; stroke-width: 1.5;" width="972" x="62" y="993"/><ellipse cx="520.75" cy="1012.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M520.3633,1008.2153 Q519.4253,1008.2153 518.9937,1009.2156 Q518.562,1010.2158 518.562,1012.4487 Q518.562,1014.6733 518.9937,1015.6736 Q519.4253,1016.6738 520.3633,1016.6738 Q521.3096,1016.6738 521.7412,1015.6736 Q522.1729,1014.6733 522.1729,1012.4487 Q522.1729,1010.2158 521.7412,1009.2156 Q521.3096,1008.2153 520.3633,1008.2153 Z M516.0137,1012.4487 Q516.0137,1009.2695 517.1135,1007.6426 Q518.2134,1006.0156 520.3633,1006.0156 Q522.5215,1006.0156 523.6213,1007.6426 Q524.7212,1009.2695 524.7212,1012.4487 Q524.7212,1015.6196 523.6213,1017.2466 Q522.5215,1018.8735 520.3633,1018.8735 Q518.2134,1018.8735 517.1135,1017.2466 Q516.0137,1015.6196 516.0137,1012.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="539.25" y="1009.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="32" x="548.25" y="1023.7344">TPCH</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="63" x2="1033" y1="1031.2656" y2="1031.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="63" x2="1033" y1="1039.2656" y2="1039.2656"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="1048.2432"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="946" x="82" y="1053.9004">tpch9EncryptedDFs(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): (DataFrame, DataFrame, DataFrame, DataFrame, DataFrame, DataFrame)</text><ellipse cx="73" cy="1064.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="540" x="82" y="1066.8555">part(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="73" cy="1077.1533" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="562" x="82" y="1079.8105">supplier(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="73" cy="1090.1084" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="560" x="82" y="1092.7656">lineitem(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="73" cy="1103.0635" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="567" x="82" y="1105.7207">partsupp(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="73" cy="1116.0186" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="554" x="82" y="1118.6758">orders(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="73" cy="1128.9736" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="552" x="82" y="1131.6309">nation(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="73" cy="1141.9287" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="762" x="82" y="1144.5859">tpch9(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int, quantityThreshold: Option[Int] = None): DataFrame</text><!--class edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel" style="stroke: #A80036; stroke-width: 1.5;" width="229" x="1256" y="718"/><ellipse cx="1329.75" cy="737.1328" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1326.1777,733.3979 L1326.1777,731.2397 L1333.5571,731.2397 L1333.5571,733.3979 L1331.0918,733.3979 L1331.0918,741.4746 L1333.5571,741.4746 L1333.5571,743.6328 L1326.1777,743.6328 L1326.1777,741.4746 L1328.6431,741.4746 L1328.6431,733.3979 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="1348.25" y="734.6016">«sealed trait»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="73" x="1350.25" y="748.7344">SecurityLevel</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1257" x2="1484" y1="756.2656" y2="756.2656"/><ellipse cx="1267" cy="768.2432" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="1276" y="770.9004">name: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1257" x2="1484" y1="777.2207" y2="777.2207"/><ellipse cx="1267" cy="789.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="1276" y="791.8555">applyTo[T](df: DataFrame): DataFrame</text><!--class edu.berkeley.cs.rise.opaque.benchmark.Encrypted--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="edu.berkeley.cs.rise.opaque.benchmark.Encrypted" style="stroke: #A80036; stroke-width: 1.5;" width="229" x="2246.5" y="718"/><ellipse cx="2327.75" cy="737.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2327.3633,733.2153 Q2326.4253,733.2153 2325.9937,734.2156 Q2325.562,735.2158 2325.562,737.4487 Q2325.562,739.6733 2325.9937,740.6736 Q2326.4253,741.6738 2327.3633,741.6738 Q2328.3096,741.6738 2328.7412,740.6736 Q2329.1729,739.6733 2329.1729,737.4487 Q2329.1729,735.2158 2328.7412,734.2156 Q2328.3096,733.2153 2327.3633,733.2153 Z M2323.0137,737.4487 Q2323.0137,734.2695 2324.1135,732.6426 Q2325.2134,731.0156 2327.3633,731.0156 Q2329.5215,731.0156 2330.6213,732.6426 Q2331.7212,734.2695 2331.7212,737.4487 Q2331.7212,740.6196 2330.6213,742.2466 Q2329.5215,743.8735 2327.3633,743.8735 Q2325.2134,743.8735 2324.1135,742.2466 Q2323.0137,740.6196 2323.0137,737.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="2352.25" y="734.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="2348.25" y="748.7344">Encrypted</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2247.5" x2="2474.5" y1="756.2656" y2="756.2656"/><ellipse cx="2257.5" cy="768.2432" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="2266.5" y="770.9004">name: String</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="108" x="2336.5" y="770.9004">default="encrypted"</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2247.5" x2="2474.5" y1="777.2207" y2="777.2207"/><ellipse cx="2257.5" cy="789.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="2266.5" y="791.8555">applyTo[T](df: DataFrame): DataFrame</text><!--class edu.berkeley.cs.rise.opaque.benchmark.Insecure--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="edu.berkeley.cs.rise.opaque.benchmark.Insecure" style="stroke: #A80036; stroke-width: 1.5;" width="229" x="2246.5" y="603"/><ellipse cx="2332.75" cy="622.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2332.3633,618.2153 Q2331.4253,618.2153 2330.9937,619.2156 Q2330.562,620.2158 2330.562,622.4487 Q2330.562,624.6733 2330.9937,625.6736 Q2331.4253,626.6738 2332.3633,626.6738 Q2333.3096,626.6738 2333.7412,625.6736 Q2334.1729,624.6733 2334.1729,622.4487 Q2334.1729,620.2158 2333.7412,619.2156 Q2333.3096,618.2153 2332.3633,618.2153 Z M2328.0137,622.4487 Q2328.0137,619.2695 2329.1135,617.6426 Q2330.2134,616.0156 2332.3633,616.0156 Q2334.5215,616.0156 2335.6213,617.6426 Q2336.7212,619.2695 2336.7212,622.4487 Q2336.7212,625.6196 2335.6213,627.2466 Q2334.5215,628.8735 2332.3633,628.8735 Q2330.2134,628.8735 2329.1135,627.2466 Q2328.0137,625.6196 2328.0137,622.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="2352.25" y="619.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="2353.25" y="633.7344">Insecure</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2247.5" x2="2474.5" y1="641.2656" y2="641.2656"/><ellipse cx="2257.5" cy="653.2432" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="2266.5" y="655.9004">name: String</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="2336.5" y="655.9004">default="spark sql"</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2247.5" x2="2474.5" y1="662.2207" y2="662.2207"/><ellipse cx="2257.5" cy="674.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="2266.5" y="676.8555">applyTo[T](df: DataFrame): DataFrame</text><!--class edu.xjtu.cs.cyx.qshield.implicits--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="67.2207" id="edu.xjtu.cs.cyx.qshield.implicits" style="stroke: #A80036; stroke-width: 1.5;" width="465" x="1707" y="269.5"/><ellipse cx="1911.75" cy="288.6328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1911.3633,284.7153 Q1910.4253,284.7153 1909.9937,285.7156 Q1909.562,286.7158 1909.562,288.9487 Q1909.562,291.1733 1909.9937,292.1736 Q1910.4253,293.1738 1911.3633,293.1738 Q1912.3096,293.1738 1912.7412,292.1736 Q1913.1729,291.1733 1913.1729,288.9487 Q1913.1729,286.7158 1912.7412,285.7156 Q1912.3096,284.7153 1911.3633,284.7153 Z M1907.0137,288.9487 Q1907.0137,285.7695 1908.1135,284.1426 Q1909.2134,282.5156 1911.3633,282.5156 Q1913.5215,282.5156 1914.6213,284.1426 Q1915.7212,285.7695 1915.7212,288.9487 Q1915.7212,292.1196 1914.6213,293.7466 Q1913.5215,295.3735 1911.3633,295.3735 Q1909.2134,295.3735 1908.1135,293.7466 Q1907.0137,292.1196 1907.0137,288.9487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="1930.75" y="286.1016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="1932.25" y="300.2344">implicits</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1708" x2="2171" y1="307.7656" y2="307.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1708" x2="2171" y1="315.7656" y2="315.7656"/><ellipse cx="1718" cy="327.7432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="439" x="1727" y="330.4004">datasetToQShieldDatasetFunctions[T](ds: Dataset[T]): QShieldDatasetFunctions[T]</text><!--class edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="131.9961" id="edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark" style="stroke: #A80036; stroke-width: 1.5;" width="590" x="253" y="102"/><ellipse cx="485.25" cy="121.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M484.8633,117.2153 Q483.9253,117.2153 483.4937,118.2156 Q483.062,119.2158 483.062,121.4487 Q483.062,123.6733 483.4937,124.6736 Q483.9253,125.6738 484.8633,125.6738 Q485.8096,125.6738 486.2412,124.6736 Q486.6729,123.6733 486.6729,121.4487 Q486.6729,119.2158 486.2412,118.2156 Q485.8096,117.2153 484.8633,117.2153 Z M480.5137,121.4487 Q480.5137,118.2695 481.6135,116.6426 Q482.7134,115.0156 484.8633,115.0156 Q487.0215,115.0156 488.1213,116.6426 Q489.2212,118.2695 489.2212,121.4487 Q489.2212,124.6196 488.1213,126.2466 Q487.0215,127.8735 484.8633,127.8735 Q482.7134,127.8735 481.6135,126.2466 Q480.5137,124.6196 480.5137,121.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="539.25" y="118.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="505.75" y="132.7344">QBigDataBenchmark</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="254" x2="842" y1="140.2656" y2="140.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="254" x2="842" y1="148.2656" y2="148.2656"/><ellipse cx="264" cy="160.2432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="559" x="273" y="162.9004">rankings(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="264" cy="173.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="564" x="273" y="175.8555">uservisits(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="264" cy="186.1533" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="526" x="273" y="188.8105">q1(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="264" cy="199.1084" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="526" x="273" y="201.7656">q2(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="264" cy="212.0635" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="526" x="273" y="214.7207">q3(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame</text><ellipse cx="264" cy="225.0186" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="522" x="273" y="227.6758">q(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int) : DataFrame</text><!--class edu.xjtu.cs.cyx.qshield.benchmark.QSecurityLevel--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="80.1758" id="edu.xjtu.cs.cyx.qshield.benchmark.QSecurityLevel" style="stroke: #A80036; stroke-width: 1.5;" width="229" x="1256" y="102"/><ellipse cx="1325.25" cy="121.1328" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1321.6777,117.3979 L1321.6777,115.2397 L1329.0571,115.2397 L1329.0571,117.3979 L1326.5918,117.3979 L1326.5918,125.4746 L1329.0571,125.4746 L1329.0571,127.6328 L1321.6777,127.6328 L1321.6777,125.4746 L1324.1431,125.4746 L1324.1431,117.3979 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="35" x="1369.25" y="118.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="82" x="1345.75" y="132.7344">QSecurityLevel</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1257" x2="1484" y1="140.2656" y2="140.2656"/><ellipse cx="1267" cy="152.2432" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="1276" y="154.9004">name: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1257" x2="1484" y1="161.2207" y2="161.2207"/><ellipse cx="1267" cy="173.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="1276" y="175.8555">applyTo[T](df: DataFrame): DataFrame</text><!--class edu.xjtu.cs.cyx.qshield.benchmark.QEncrypted--><rect fill="#FEFECE" filter="url(#f9z9rm7dx0h8y)" height="144.9512" id="edu.xjtu.cs.cyx.qshield.benchmark.QEncrypted" style="stroke: #A80036; stroke-width: 1.5;" width="340" x="1200.5" y="217.5"/><ellipse cx="1332.75" cy="236.6328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1332.3633,232.7153 Q1331.4253,232.7153 1330.9937,233.7156 Q1330.562,234.7158 1330.562,236.9487 Q1330.562,239.1733 1330.9937,240.1736 Q1331.4253,241.1738 1332.3633,241.1738 Q1333.3096,241.1738 1333.7412,240.1736 Q1334.1729,239.1733 1334.1729,236.9487 Q1334.1729,234.7158 1333.7412,233.7156 Q1333.3096,232.7153 1332.3633,232.7153 Z M1328.0137,236.9487 Q1328.0137,233.7695 1329.1135,232.1426 Q1330.2134,230.5156 1332.3633,230.5156 Q1334.5215,230.5156 1335.6213,232.1426 Q1336.7212,233.7695 1336.7212,236.9487 Q1336.7212,240.1196 1335.6213,241.7466 Q1334.5215,243.3735 1332.3633,243.3735 Q1330.2134,243.3735 1329.1135,241.7466 Q1328.0137,240.1196 1328.0137,236.9487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="1361.75" y="234.1016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="1353.25" y="248.2344">QEncrypted</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1201.5" x2="1539.5" y1="255.7656" y2="255.7656"/><ellipse cx="1211.5" cy="267.7432" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="1220.5" y="270.4004">name: String</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="108" x="1290.5" y="270.4004">default="encrypted"</text><ellipse cx="1211.5" cy="280.6982" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="1220.5" y="283.3555">GCM_IV_LENGTH: Int</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="1333.5" y="283.3555">default=12</text><ellipse cx="1211.5" cy="293.6533" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="1220.5" y="296.3105">GCM_KEY_LENGTH: Int</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="1343.5" y="296.3105">default=16</text><ellipse cx="1211.5" cy="306.6084" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="1220.5" y="309.2656">GCM_TAG_LENGTH: Int</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="1346.5" y="309.2656">default=16</text><ellipse cx="1211.5" cy="319.5635" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="1220.5" y="322.2207">tokenKey: Array[Byte]</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="196" x="1338.5" y="322.2207">default="Opaque devel key".getBytes</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1201.5" x2="1539.5" y1="328.541" y2="328.541"/><ellipse cx="1211.5" cy="340.5186" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="1220.5" y="343.1758">encrypt(data: Array[Byte]): Array[Byte]</text><ellipse cx="1211.5" cy="353.4736" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="1220.5" y="356.1309">applyTo[T](df: DataFrame): DataFrame</text><!--link edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel to edu.berkeley.cs.rise.opaque.benchmark.Benchmark--><path d="M1370.5,712.47 C1370.5,702.71 1370.5,692.95 1370.5,683.2 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel-edu.berkeley.cs.rise.opaque.benchmark.Benchmark" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1370.5,717.57,1374.5,708.57,1370.5,712.57,1366.5,708.57,1370.5,717.57" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.BigDataBenchmark to edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel--><path d="M835.3,581.01 C902.95,592.66 973.07,611.59 1034,642 C1067.19,658.56 1061.24,682.61 1094,700 C1141.9,725.42 1200.02,739.7 1250.51,747.73 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.BigDataBenchmark-edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1255.68,748.53,1247.4045,743.19,1250.7398,747.759,1246.1708,751.0943,1255.68,748.53" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.KMeans to edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel--><path d="M928.63,726.84 C1045.45,735.09 1165.6,743.59 1250.91,749.62 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.KMeans-edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1255.97,749.97,1247.2656,745.362,1250.9818,749.627,1246.7168,753.3431,1255.97,749.97" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.LeastSquares to edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel--><path d="M1370.5,832.57 C1370.5,822.81 1370.5,813.06 1370.5,803.3 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.LeastSquares-edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1370.5,798.2,1366.5,807.2,1370.5,803.2,1374.5,807.2,1370.5,798.2" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.LogisticRegression to edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel--><path d="M891.02,791.24 C1019.11,782.34 1156.32,772.81 1250.82,766.24 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.LogisticRegression-edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1255.85,765.9,1246.5968,762.5269,1250.8618,766.243,1247.1456,770.508,1255.85,765.9" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.PageRank to edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel--><path d="M818.81,926.15 C891.26,918.53 967.81,902.62 1034,872 C1067.38,856.56 1061.41,832.05 1094,815 C1142.02,789.89 1200.15,775.84 1250.62,767.97 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.PageRank-edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1255.8,767.19,1246.2981,764.5988,1250.8576,767.9471,1247.5094,772.5066,1255.8,767.19" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.TPCH to edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel--><path d="M1010.83,992.89 C1018.82,987.28 1026.56,981.33 1034,975 C1091.86,925.8 1036.31,864.39 1094,815 C1136.95,778.23 1197.4,763.06 1250.73,757.47 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.TPCH-edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1255.87,756.96,1246.5246,753.8515,1250.8936,757.4448,1247.3003,761.8138,1255.87,756.96" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel to edu.berkeley.cs.rise.opaque.benchmark.Encrypted--><path d="M1505.53,758 C1701.4,758 2062.44,758 2246.16,758 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel-edu.berkeley.cs.rise.opaque.benchmark.Encrypted" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1505.38,765,1485.38,758,1505.38,751,1505.38,765" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel to edu.berkeley.cs.rise.opaque.benchmark.Insecure--><path d="M1505.53,742.41 C1701.4,719.62 2062.44,677.62 2246.16,656.24 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel-edu.berkeley.cs.rise.opaque.benchmark.Insecure" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1506.05,749.39,1485.38,744.75,1504.43,735.49,1506.05,749.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.benchmark.QEncrypted to edu.xjtu.cs.cyx.qshield.benchmark.QSecurityLevel--><path d="M1370.5,217.45 C1370.5,212.38 1370.5,207.31 1370.5,202.25 " fill="none" id="edu.xjtu.cs.cyx.qshield.benchmark.QEncrypted-edu.xjtu.cs.cyx.qshield.benchmark.QSecurityLevel" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1363.5,202.08,1370.5,182.08,1377.5,202.08,1363.5,202.08" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark to edu.xjtu.cs.cyx.qshield.benchmark.QSecurityLevel--><path d="M843.19,158.68 C983.93,154.22 1144.53,149.13 1250.93,145.76 " fill="none" id="edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark-edu.xjtu.cs.cyx.qshield.benchmark.QSecurityLevel" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1255.95,145.6,1246.8288,141.8847,1250.9525,145.7571,1247.0801,149.8807,1255.95,145.6" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.benchmark.Encrypted to edu.berkeley.cs.rise.opaque.implicits--><path d="M2467.1,717.97 C2482.82,711.96 2498.84,705.83 2514,700 C2570.46,678.3 2633.72,653.83 2683.83,634.4 " fill="none" id="edu.berkeley.cs.rise.opaque.benchmark.Encrypted-edu.berkeley.cs.rise.opaque.implicits" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2688.63,632.54,2678.7937,632.0435,2683.9644,634.3378,2681.6701,639.5085,2688.63,632.54" style="stroke: #A80036; stroke-width: 1.0;"/><!--link org.apache.spark.sql.OpaqueDatasetFunctions to edu.berkeley.cs.rise.opaque.implicits--><path d="M2490.2,235.63 C2498.55,240.29 2506.58,245.41 2514,251 C2632.2,340.1 2722.4,496.76 2758.19,565.29 " fill="none" id="org.apache.spark.sql.OpaqueDatasetFunctions-edu.berkeley.cs.rise.opaque.implicits" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="2485.53,233.08,2491.5049,240.9094,2489.9162,235.4803,2495.3454,233.8915,2485.53,233.08" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.benchmark.QEncrypted to edu.xjtu.cs.cyx.qshield.implicits--><path d="M1540.85,293.88 C1591.35,295.04 1647.65,296.33 1701.64,297.57 " fill="none" id="edu.xjtu.cs.cyx.qshield.benchmark.QEncrypted-edu.xjtu.cs.cyx.qshield.implicits" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1706.85,297.69,1697.9438,293.4854,1701.8513,297.5757,1697.7609,301.4833,1706.85,297.69" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.implicits to org.apache.spark.sql.QShieldDatasetFunctions--><path d="M2172.03,309.62 C2190.77,310.16 2209.28,310.69 2226.94,311.19 " fill="none" id="edu.xjtu.cs.cyx.qshield.implicits-org.apache.spark.sql.QShieldDatasetFunctions" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="2232.39,311.35,2223.5079,307.0946,2227.392,311.2072,2223.2794,315.0913,2232.39,311.35" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
left to right direction

namespace org.apache.spark.sql{
  class OpaqueDatasetFunctions <<Serializable>> {
    OpaqueDatasetFunctions[T](ds: Dataset[T])
    +encrypted(): DataFrame
  }
  class QShieldDatasetFunctions <<Serializable>> {
    QShieldDatasetFunctions[T](ds: Dataset[T])
    +acPolicyApplied(tk: Array[Byte]): DataFrame
    +resPrepared() : DataFrame
  }
}

namespace edu.berkeley.cs.rise.opaque{
  class implicits << (O,orchid) Object >> {
    +datasetToOpaqueDatasetFunctions[T](ds: Dataset[T]): OpaqueDatasetFunctions
  }
  namespace benchmark{
    class Benchmark << (O,orchid) Object >> {
      + dataDir : String
      + main(args : Array[String]) : Unit
    }
    class BigDataBenchmark << (O,orchid) Object >> {
      +rankings(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +uservisits(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +q1(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +q2(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +q3(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
    }
    class KMeans << (O,orchid) Object >> {
      +data(spark: SparkSession, securityLevel: SecurityLevel, numPartitions: Int, rand: Random, N: Int, D: Int): DataFrame
      +train(spark: SparkSession, securityLevel: SecurityLevel, numPartitions: Int, N: Int, D: Int, K: Int, convergeDist: Double): Array[Array[Double]]
    }
    class LeastSquares << (O,orchid) Object >> {
      +data(spark: SparkSession, securityLevel: SecurityLevel, numPartitions: Int): DataFrame
      +query(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
    }
    class LogisticRegression << (O,orchid) Object >> {
      +data(spark: SparkSession, securityLevel: SecurityLevel, numPartitions: Int, rand: Random, N: Int, D: Int, R: Double): DataFrame
      +train(spark: SparkSession, securityLevel: SecurityLevel, N: Int, numPartitions: Int): Array[Double]
    }
    class PageRank << (O,orchid) Object >> {
      +run(spark: SparkSession, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
    }
    class TPCH << (O,orchid) Object >> {
      -tpch9EncryptedDFs(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): (DataFrame, DataFrame, DataFrame, DataFrame, DataFrame, DataFrame)
      +part(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +supplier(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +lineitem(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +partsupp(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +orders(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +nation(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int): DataFrame
      +tpch9(sqlContext: SQLContext, securityLevel: SecurityLevel, size: String, numPartitions: Int, quantityThreshold: Option[Int] = None): DataFrame
    }
    interface SecurityLevel <<sealed trait>> {
      +name: String
      +applyTo[T](df: DataFrame): DataFrame
    }
    class Encrypted << (O,orchid) Object >> {
      +name: String <i><color:grey>default="encrypted"</color></i>
      +applyTo[T](df: DataFrame): DataFrame
    }
    class Insecure << (O,orchid) Object >> {
      +name: String <i><color:grey>default="spark sql"</color></i>
      +applyTo[T](df: DataFrame): DataFrame
    }
  }
}

namespace edu.xjtu.cs.cyx.qshield{
  class implicits << (O,orchid) Object >> {
    +datasetToQShieldDatasetFunctions[T](ds: Dataset[T]): QShieldDatasetFunctions[T]
  }
  namespace benchmark{
    class QBigDataBenchmark << (O,orchid) Object >> {
      +rankings(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame
      +uservisits(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame
      +q1(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame
      +q2(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame
      +q3(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int): DataFrame
      +q(spark: SparkSession, qsecurityLevel: QSecurityLevel, size: String, numPartitions: Int) : DataFrame
    }
    interface QSecurityLevel <<trait>> {
      +name: String
      +applyTo[T](df: DataFrame): DataFrame
    }
    class QEncrypted << (O,orchid) Object >> {
      +name: String <i><color:grey>default="encrypted"</color></i>
      +GCM_IV_LENGTH: Int <i><color:grey>default=12</color></i>
      +GCM_KEY_LENGTH: Int <i><color:grey>default=16</color></i>
      +GCM_TAG_LENGTH: Int <i><color:grey>default=16</color></i>
      +tokenKey: Array[Byte] <i><color:grey>default="Opaque devel key".getBytes</color></i>
      +encrypt(data: Array[Byte]): Array[Byte]
      +applyTo[T](df: DataFrame): DataFrame
    }
  }
}

edu.berkeley.cs.rise.opaque.benchmark.Benchmark .left.> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel
edu.berkeley.cs.rise.opaque.benchmark.BigDataBenchmark ..> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel
edu.berkeley.cs.rise.opaque.benchmark.KMeans ..> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel
edu.berkeley.cs.rise.opaque.benchmark.LeastSquares .right.> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel
edu.berkeley.cs.rise.opaque.benchmark.LogisticRegression ..> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel
edu.berkeley.cs.rise.opaque.benchmark.PageRank ..> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel
edu.berkeley.cs.rise.opaque.benchmark.TPCH ..> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel
edu.berkeley.cs.rise.opaque.benchmark.Encrypted - -up-|> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel
edu.berkeley.cs.rise.opaque.benchmark.Insecure - -up-|> edu.berkeley.cs.rise.opaque.benchmark.SecurityLevel

edu.xjtu.cs.cyx.qshield.benchmark.QEncrypted -right-|> edu.xjtu.cs.cyx.qshield.benchmark.QSecurityLevel
edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark .down.> edu.xjtu.cs.cyx.qshield.benchmark.QSecurityLevel

edu.berkeley.cs.rise.opaque.benchmark.Encrypted - -> edu.berkeley.cs.rise.opaque.implicits
edu.berkeley.cs.rise.opaque.implicits .u.> org.apache.spark.sql.OpaqueDatasetFunctions
edu.xjtu.cs.cyx.qshield.benchmark.QEncrypted - -> edu.xjtu.cs.cyx.qshield.implicits
edu.xjtu.cs.cyx.qshield.implicits .d.> org.apache.spark.sql.QShieldDatasetFunctions
@enduml

PlantUML version 1.2018.14(Sat Dec 22 00:33:16 CST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 17.0.5+9-LTS-191
Operating System: Mac OS X
OS Version: 12.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>