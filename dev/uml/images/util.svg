<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1534px" preserveAspectRatio="none" style="width:2575px;height:1534px;" version="1.1" viewBox="0 0 2575 1534" width="2575px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kqlsa0szsuom" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster edu.berkeley.cs.rise.opaque--><polygon fill="#FFFFFF" filter="url(#f1kqlsa0szsuom)" points="1103,24,1302,24,1309,46.4883,2553,46.4883,2553,1020,1103,1020,1103,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1103" x2="1309" y1="46.4883" y2="46.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="1107" y="39.5352">edu.berkeley.cs.rise.opaque</text><!--cluster edu.berkeley.cs.rise.opaque.expressions--><polygon fill="#FFFFFF" filter="url(#f1kqlsa0szsuom)" points="2119.5,175,2211.5,175,2218.5,197.4883,2508.5,197.4883,2508.5,996,2119.5,996,2119.5,175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2119.5" x2="2218.5" y1="197.4883" y2="197.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="2123.5" y="190.5352">expressions</text><!--cluster edu.xjtu.cs.cyx.qshield--><polygon fill="#FFFFFF" filter="url(#f1kqlsa0szsuom)" points="22,1181,185,1181,192,1203.4883,1075,1203.4883,1075,1352,22,1352,22,1181" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="192" y1="1203.4883" y2="1203.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="26" y="1196.5352">edu.xjtu.cs.cyx.qshield</text><!--cluster edu.berkeley.cs.rise.opaque.execution--><polygon fill="#FFFFFF" filter="url(#f1kqlsa0szsuom)" points="2174,1044,2445,1044,2452,1066.4883,2455,1066.4883,2455,1143,2174,1143,2174,1044" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2174" x2="2452" y1="1066.4883" y2="1066.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="265" x="2178" y="1059.5352">edu.berkeley.cs.rise.opaque.execution</text><!--cluster edu.berkeley.cs.rise.opaque.logical--><polygon fill="#FFFFFF" filter="url(#f1kqlsa0szsuom)" points="2184.5,1167,2434.5,1167,2441.5,1189.4883,2444.5,1189.4883,2444.5,1349,2184.5,1349,2184.5,1167" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2184.5" x2="2441.5" y1="1189.4883" y2="1189.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="244" x="2188.5" y="1182.5352">edu.berkeley.cs.rise.opaque.logical</text><!--cluster edu.xjtu.cs.cyx.qshield.benchmark--><polygon fill="#FFFFFF" filter="url(#f1kqlsa0szsuom)" points="775,50,1020,50,1027,72.4883,1030,72.4883,1030,149,775,149,775,50" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="775" x2="1027" y1="72.4883" y2="72.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="239" x="779" y="65.5352">edu.xjtu.cs.cyx.qshield.benchmark</text><!--cluster edu.xjtu.cs.cyx.qshield.execution--><polygon fill="#FFFFFF" filter="url(#f1kqlsa0szsuom)" points="1452.5,1217,1687.5,1217,1694.5,1239.4883,1697.5,1239.4883,1697.5,1316,1452.5,1316,1452.5,1217" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1452.5" x2="1694.5" y1="1239.4883" y2="1239.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="1456.5" y="1232.5352">edu.xjtu.cs.cyx.qshield.execution</text><!--cluster edu.xjtu.cs.cyx.qshield.logical--><polygon fill="#FFFFFF" filter="url(#f1kqlsa0szsuom)" points="1445.5,1340,1659.5,1340,1666.5,1362.4883,1704.5,1362.4883,1704.5,1522,1445.5,1522,1445.5,1340" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1445.5" x2="1666.5" y1="1362.4883" y2="1362.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="1449.5" y="1355.5352">edu.xjtu.cs.cyx.qshield.logical</text><!--class edu.berkeley.cs.rise.opaque.Utils--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="650.1992" id="edu.berkeley.cs.rise.opaque.Utils" style="stroke: #A80036; stroke-width: 1.5;" width="912" x="1119" y="354"/><ellipse cx="1547.75" cy="373.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1547.3633,369.2153 Q1546.4253,369.2153 1545.9937,370.2156 Q1545.562,371.2158 1545.562,373.4487 Q1545.562,375.6733 1545.9937,376.6736 Q1546.4253,377.6738 1547.3633,377.6738 Q1548.3096,377.6738 1548.7412,376.6736 Q1549.1729,375.6733 1549.1729,373.4487 Q1549.1729,371.2158 1548.7412,370.2156 Q1548.3096,369.2153 1547.3633,369.2153 Z M1543.0137,373.4487 Q1543.0137,370.2695 1544.1135,368.6426 Q1545.2134,367.0156 1547.3633,367.0156 Q1549.5215,367.0156 1550.6213,368.6426 Q1551.7212,370.2695 1551.7212,373.4487 Q1551.7212,376.6196 1550.6213,378.2466 Q1549.5215,379.8735 1547.3633,379.8735 Q1545.2134,379.8735 1544.1135,378.2466 Q1543.0137,376.6196 1543.0137,373.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="1566.25" y="370.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="1579.25" y="384.7344">Utils</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1120" x2="2030" y1="392.2656" y2="392.2656"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1127" y="401.2432"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="1139" y="406.9004">perf : Boolean</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="186" x="1215" y="406.9004">default=System.getenv."SGX_PERF"</text><ellipse cx="1130" cy="417.1982" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1139" y="419.8555">eid: Long</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="1191" y="419.8555">default=0</text><ellipse cx="1130" cy="430.1533" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="1139" y="432.8105">GCM_IV_LENGTH: Int</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="1252" y="432.8105">default=12</text><ellipse cx="1130" cy="443.1084" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="1139" y="445.7656">GCM_KEY_LENGTH: Int</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="1262" y="445.7656">default=16</text><ellipse cx="1130" cy="456.0635" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="1139" y="458.7207">GCM_TAG_LENGTH: Int</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="1265" y="458.7207">default=16</text><ellipse cx="1130" cy="469.0186" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1139" y="471.6758">sharedKey: Array[Byte]</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="196" x="1264" y="471.6758">default="Opaque devel key".getBytes</text><ellipse cx="1130" cy="481.9736" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="1139" y="484.6309">attested: Boolean</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="1233" y="484.6309">default=false</text><ellipse cx="1130" cy="494.9287" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="1139" y="497.5859">attesting_getepid: Boolean</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="1283" y="497.5859">default=false</text><ellipse cx="1130" cy="507.8838" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="1139" y="510.541">attesting_getmsg1: Boolean</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="1290" y="510.541">default=false</text><ellipse cx="1130" cy="520.8389" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="1139" y="523.4961">attesting_getmsg3: Boolean</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="1290" y="523.4961">default=false</text><ellipse cx="1130" cy="533.7939" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="1139" y="536.4512">attesting_final_ra: Boolean</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="1283" y="536.4512">default=false</text><ellipse cx="1130" cy="546.749" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="1139" y="549.4063">MaxBlockSize: Int</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="1233" y="549.4063">default=1000</text><ellipse cx="1130" cy="559.7041" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="1139" y="562.3613">emptyBlock: Block</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1120" x2="2030" y1="568.6816" y2="568.6816"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1127" y="577.6592"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="1139" y="583.3164">jsonSerialize(x: Any): String</text><ellipse cx="1130" cy="593.6143" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="171" x="1139" y="596.2715">time[A](desc: String)(f: =&gt; A): A</text><ellipse cx="1130" cy="606.5693" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="1139" y="609.2266">logPerf(message: String): Unit</text><ellipse cx="1130" cy="619.5244" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1139" y="622.1816">retry[T](n: Int)(fn: =&gt; T): T</text><ellipse cx="1130" cy="632.4795" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="332" x="1139" y="635.1367">timeBenchmark[A](benchmarkAttrs: (String, Any)*)(f: =&gt; A): A</text><ellipse cx="1130" cy="645.4346" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="272" x="1139" y="648.0918">findLibraryAsResource(libraryName: String): String</text><ellipse cx="1130" cy="658.3896" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="233" x="1139" y="661.0469">findResource(resourceName: String): String</text><ellipse cx="1130" cy="671.3447" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="1139" y="674.002">createTempDir(): File</text><ellipse cx="1130" cy="684.2998" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="1139" y="686.957">deleteRecursively(file: File): Unit</text><ellipse cx="1130" cy="697.2549" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="1139" y="699.9121">initEnclave(): (SGXEnclave, Long)</text><ellipse cx="1130" cy="710.21" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="1139" y="712.8672">encrypt(data: Array[Byte]): Array[Byte]</text><ellipse cx="1130" cy="723.165" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="1139" y="725.8223">decrypt(data: Array[Byte]): Array[Byte]</text><ellipse cx="1130" cy="736.1201" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="246" x="1139" y="738.7773">initSQLContext(sqlContext: SQLContext): Unit</text><ellipse cx="1130" cy="749.0752" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="306" x="1139" y="751.7324">concatByteArrays(arrays: Array[Array[Byte]]): Array[Byte]</text><ellipse cx="1130" cy="762.0303" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="337" x="1139" y="764.6875">splitBytes(bytes: Array[Byte], numSplits: Int): Array[Array[Byte]]</text><ellipse cx="1130" cy="774.9854" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="355" x="1139" y="777.6426">ensureCached[T](rdd: RDD[T], storageLevel: StorageLevel): RDD[T]</text><ellipse cx="1130" cy="787.9404" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="1139" y="790.5977">ensureCached[T](rdd: RDD[T]): RDD[T]</text><ellipse cx="1130" cy="800.8955" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="383" x="1139" y="803.5527">ensureCached[T](ds: Dataset[T], storageLevel: StorageLevel): Dataset[T]</text><ellipse cx="1130" cy="813.8506" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="235" x="1139" y="816.5078">ensureCached[T](ds: Dataset[T]): Dataset[T]</text><ellipse cx="1130" cy="826.8057" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="1139" y="829.4629">force(ds: Dataset[_]): Unit</text><ellipse cx="1130" cy="839.7607" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="532" x="1139" y="842.418">flatbuffersCreateField(builder: FlatBufferBuilder, value: Any, dataType: DataType, isNull: Boolean): Int</text><ellipse cx="1130" cy="852.7158" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="242" x="1139" y="855.373">flatbuffersExtractFieldValue(f: tuix.Field): Any</text><ellipse cx="1130" cy="865.6709" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="563" x="1139" y="868.3281">encryptInternalRowsFlatbuffers(rows: Seq[InternalRow], types: Seq[DataType], useEnclave: Boolean): Block</text><ellipse cx="1130" cy="878.626" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="294" x="1139" y="881.2832">decryptBlockFlatbuffers(block: Block): Seq[InternalRow]</text><ellipse cx="1130" cy="891.5811" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="494" x="1139" y="894.2383">treeFold[BaseType &lt;: TreeNode[BaseType], B](tree: BaseType)(op: (Seq[B], BaseType) =&gt; B): B</text><ellipse cx="1130" cy="904.5361" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="532" x="1139" y="907.1934">flatbuffersSerializeExpression(builder: FlatBufferBuilder, expr: Expression, input: Seq[Attribute]): Int</text><ellipse cx="1130" cy="917.4912" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="437" x="1139" y="920.1484">serializeFilterExpression(condition: Expression, input: Seq[Attribute]): Array[Byte]</text><ellipse cx="1130" cy="930.4463" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="476" x="1139" y="933.1035">serializeProjectList(projectList: Seq[NamedExpression], input: Seq[Attribute]): Array[Byte]</text><ellipse cx="1130" cy="943.4014" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="428" x="1139" y="946.0586">serializeSortOrder(sortOrder: Seq[SortOrder], input: Seq[Attribute]): Array[Byte]</text><ellipse cx="1130" cy="956.3564" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="886" x="1139" y="959.0137">serializeJoinExpression(joinType: JoinType, leftKeys: Seq[Expression], rightKeys: Seq[Expression], leftSchema: Seq[Attribute], rightSchema: Seq[Attribute]): Array[Byte]</text><ellipse cx="1130" cy="969.3115" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="702" x="1139" y="971.9688">serializeAggOp(groupingExpressions: Seq[Expression], aggExpressions: Seq[NamedExpression], input: Seq[Attribute]): Array[Byte]</text><ellipse cx="1130" cy="982.2666" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="847" x="1139" y="984.9238">serializeAggExpression(builder: FlatBufferBuilder, e: AggregateExpression, input: Seq[Attribute], aggSchema: Seq[Attribute], concatSchema: Seq[Attribute]): Int</text><ellipse cx="1130" cy="995.2217" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="262" x="1139" y="997.8789">concatEncryptedBlocks(blocks: Seq[Block]): Block</text><!--class edu.berkeley.cs.rise.opaque.RA--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="67.2207" id="edu.berkeley.cs.rise.opaque.RA" style="stroke: #A80036; stroke-width: 1.5;" width="185" x="1482.5" y="251.5"/><ellipse cx="1547.75" cy="270.6328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1547.3633,266.7153 Q1546.4253,266.7153 1545.9937,267.7156 Q1545.562,268.7158 1545.562,270.9487 Q1545.562,273.1733 1545.9937,274.1736 Q1546.4253,275.1738 1547.3633,275.1738 Q1548.3096,275.1738 1548.7412,274.1736 Q1549.1729,273.1733 1549.1729,270.9487 Q1549.1729,268.7158 1548.7412,267.7156 Q1548.3096,266.7153 1547.3633,266.7153 Z M1543.0137,270.9487 Q1543.0137,267.7695 1544.1135,266.1426 Q1545.2134,264.5156 1547.3633,264.5156 Q1549.5215,264.5156 1550.6213,266.1426 Q1551.7212,267.7695 1551.7212,270.9487 Q1551.7212,274.1196 1550.6213,275.7466 Q1549.5215,277.3735 1547.3633,277.3735 Q1545.2134,277.3735 1544.1135,275.7466 Q1543.0137,274.1196 1543.0137,270.9487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="1566.25" y="268.1016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16" x="1583.25" y="282.2344">RA</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1483.5" x2="1666.5" y1="289.7656" y2="289.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1483.5" x2="1666.5" y1="297.7656" y2="297.7656"/><ellipse cx="1493.5" cy="309.7432" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="1502.5" y="312.4004">initRA(sc: SparkContext): Unit</text><!--class edu.berkeley.cs.rise.opaque.EncryptedSource--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="86.8652" id="edu.berkeley.cs.rise.opaque.EncryptedSource" style="stroke: #A80036; stroke-width: 1.5;" width="672" x="1239" y="65.5"/><ellipse cx="1522.75" cy="81.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1525.2231,87.6431 Q1524.6421,87.9419 1524.0029,88.0913 Q1523.3638,88.2407 1522.6582,88.2407 Q1520.1514,88.2407 1518.8315,86.5889 Q1517.5117,84.937 1517.5117,81.8159 Q1517.5117,78.6865 1518.8315,77.0347 Q1520.1514,75.3828 1522.6582,75.3828 Q1523.3638,75.3828 1524.0112,75.5322 Q1524.6587,75.6816 1525.2231,75.9805 L1525.2231,78.7031 Q1524.5923,78.1221 1523.9988,77.8523 Q1523.4053,77.5825 1522.7744,77.5825 Q1521.4297,77.5825 1520.7449,78.6492 Q1520.0601,79.7158 1520.0601,81.8159 Q1520.0601,83.9077 1520.7449,84.9744 Q1521.4297,86.041 1522.7744,86.041 Q1523.4053,86.041 1523.9988,85.7712 Q1524.5923,85.5015 1525.2231,84.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="1543.25" y="86.0352">EncryptedSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1240" x2="1910" y1="97.5" y2="97.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1240" x2="1910" y1="105.5" y2="105.5"/><ellipse cx="1250" cy="117.4775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="459" x="1259" y="120.1348">createRelation(sqlContext: SQLContext, parameters: Map[String, String]): BaseRelation</text><ellipse cx="1250" cy="130.4326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="570" x="1259" y="133.0898">createRelation(sqlContext: SQLContext, parameters: Map[String, String], schema: StructType): BaseRelation</text><ellipse cx="1250" cy="143.3877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="646" x="1259" y="146.0449">createRelation(sqlContext: SQLContext, mode: SaveMode, parameters: Map[String, String], data: DataFrame): BaseRelation</text><!--class edu.berkeley.cs.rise.opaque.EncryptedScan--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="99.8203" id="edu.berkeley.cs.rise.opaque.EncryptedScan" style="stroke: #A80036; stroke-width: 1.5;" width="446" x="2091" y="59"/><ellipse cx="2267.75" cy="75" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2270.2231,81.1431 Q2269.6421,81.4419 2269.0029,81.5913 Q2268.3638,81.7407 2267.6582,81.7407 Q2265.1514,81.7407 2263.8315,80.0889 Q2262.5117,78.437 2262.5117,75.3159 Q2262.5117,72.1865 2263.8315,70.5347 Q2265.1514,68.8828 2267.6582,68.8828 Q2268.3638,68.8828 2269.0112,69.0322 Q2269.6587,69.1816 2270.2231,69.4805 L2270.2231,72.2031 Q2269.5923,71.6221 2268.9988,71.3523 Q2268.4053,71.0825 2267.7744,71.0825 Q2266.4297,71.0825 2265.7449,72.1492 Q2265.0601,73.2158 2265.0601,75.3159 Q2265.0601,77.4077 2265.7449,78.4744 Q2266.4297,79.541 2267.7744,79.541 Q2268.4053,79.541 2268.9988,79.2712 Q2269.5923,79.0015 2270.2231,78.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="2288.25" y="79.5352">EncryptedScan</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2092" x2="2536" y1="91" y2="91"/><ellipse cx="2102" cy="102.9775" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="2111" y="105.6348">sqlContext: SQLContext</text><ellipse cx="2102" cy="115.9326" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="2111" y="118.5898">needConversion: Boolean</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2092" x2="2536" y1="124.9102" y2="124.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="434" x="2097" y="139.5449">EncryptedScan(path: String, val schema: StructType)(sparkSession: SparkSession)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="2097" y="152.5">buildBlockedScan(): RDD[Block]</text><!--class edu.berkeley.cs.rise.opaque.expressions.ClosestPoint--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="99.8203" id="edu.berkeley.cs.rise.opaque.expressions.ClosestPoint" style="stroke: #A80036; stroke-width: 1.5;" width="287" x="2170.5" y="210"/><ellipse cx="2275.25" cy="226" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2277.7231,232.1431 Q2277.1421,232.4419 2276.5029,232.5913 Q2275.8638,232.7407 2275.1582,232.7407 Q2272.6514,232.7407 2271.3315,231.0889 Q2270.0117,229.437 2270.0117,226.3159 Q2270.0117,223.1865 2271.3315,221.5347 Q2272.6514,219.8828 2275.1582,219.8828 Q2275.8638,219.8828 2276.5112,220.0322 Q2277.1587,220.1816 2277.7231,220.4805 L2277.7231,223.2031 Q2277.0923,222.6221 2276.4988,222.3523 Q2275.9053,222.0825 2275.2744,222.0825 Q2273.9297,222.0825 2273.2449,223.1492 Q2272.5601,224.2158 2272.5601,226.3159 Q2272.5601,228.4077 2273.2449,229.4744 Q2273.9297,230.541 2275.2744,230.541 Q2275.9053,230.541 2276.4988,230.2712 Q2277.0923,230.0015 2277.7231,229.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="2295.75" y="230.5352">ClosestPoint</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2171.5" x2="2456.5" y1="242" y2="242"/><ellipse cx="2181.5" cy="253.9775" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="2190.5" y="256.6348">dataType: DataType</text><ellipse cx="2181.5" cy="266.9326" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="2190.5" y="269.5898">inputTypes: Seq[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2171.5" x2="2456.5" y1="275.9102" y2="275.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="256" x="2190.5" y="290.5449">ClosestPoint(left: Expression, right: Expression)</text><polygon fill="#FFFF44" points="2181.5,295.8428,2185.5,299.8428,2181.5,303.8428,2177.5,299.8428" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="2190.5" y="303.5">nullSafeEval(input1: Any, input2: Any): ArrayData</text><!--class edu.berkeley.cs.rise.opaque.expressions.DotProduct--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="125.7305" id="edu.berkeley.cs.rise.opaque.expressions.DotProduct" style="stroke: #A80036; stroke-width: 1.5;" width="276" x="2176" y="345"/><ellipse cx="2277.75" cy="361" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2280.2231,367.1431 Q2279.6421,367.4419 2279.0029,367.5913 Q2278.3638,367.7407 2277.6582,367.7407 Q2275.1514,367.7407 2273.8315,366.0889 Q2272.5117,364.437 2272.5117,361.3159 Q2272.5117,358.1865 2273.8315,356.5347 Q2275.1514,354.8828 2277.6582,354.8828 Q2278.3638,354.8828 2279.0112,355.0322 Q2279.6587,355.1816 2280.2231,355.4805 L2280.2231,358.2031 Q2279.5923,357.6221 2278.9988,357.3523 Q2278.4053,357.0825 2277.7744,357.0825 Q2276.4297,357.0825 2275.7449,358.1492 Q2275.0601,359.2158 2275.0601,361.3159 Q2275.0601,363.4077 2275.7449,364.4744 Q2276.4297,365.541 2277.7744,365.541 Q2278.4053,365.541 2278.9988,365.2712 Q2279.5923,365.0015 2280.2231,364.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="2298.25" y="365.5352">DotProduct</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2177" x2="2451" y1="377" y2="377"/><ellipse cx="2187" cy="388.9775" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="2196" y="391.6348">dataType: DataType</text><ellipse cx="2187" cy="401.9326" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="2196" y="404.5898">inputTypes: Array[]</text><ellipse cx="2187" cy="414.8877" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="2196" y="417.5449">symbol: String</text><ellipse cx="2187" cy="427.8428" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="2196" y="430.5">sqlOperator: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2177" x2="2451" y1="436.8203" y2="436.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="2196" y="451.4551">DotProduct(left: Expression, right: Expression)</text><polygon fill="#FFFF44" points="2187,456.7529,2191,460.7529,2187,464.7529,2183,460.7529" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="245" x="2196" y="464.4102">nullSafeEval(input1: Any, input2: Any): Double</text><!--class edu.berkeley.cs.rise.opaque.expressions.VectorAdd--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="125.7305" id="edu.berkeley.cs.rise.opaque.expressions.VectorAdd" style="stroke: #A80036; stroke-width: 1.5;" width="287" x="2170.5" y="506"/><ellipse cx="2279.25" cy="522" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2281.7231,528.1431 Q2281.1421,528.4419 2280.5029,528.5913 Q2279.8638,528.7407 2279.1582,528.7407 Q2276.6514,528.7407 2275.3315,527.0889 Q2274.0117,525.437 2274.0117,522.3159 Q2274.0117,519.1865 2275.3315,517.5347 Q2276.6514,515.8828 2279.1582,515.8828 Q2279.8638,515.8828 2280.5112,516.0322 Q2281.1587,516.1816 2281.7231,516.4805 L2281.7231,519.2031 Q2281.0923,518.6221 2280.4988,518.3523 Q2279.9053,518.0825 2279.2744,518.0825 Q2277.9297,518.0825 2277.2449,519.1492 Q2276.5601,520.2158 2276.5601,522.3159 Q2276.5601,524.4077 2277.2449,525.4744 Q2277.9297,526.541 2279.2744,526.541 Q2279.9053,526.541 2280.4988,526.2712 Q2281.0923,526.0015 2281.7231,525.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="2299.75" y="526.5352">VectorAdd</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2171.5" x2="2456.5" y1="538" y2="538"/><ellipse cx="2181.5" cy="549.9775" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="2190.5" y="552.6348">dataType: DataType</text><ellipse cx="2181.5" cy="562.9326" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="2190.5" y="565.5898">inputTypes: Array[]</text><ellipse cx="2181.5" cy="575.8877" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="2190.5" y="578.5449">symbol: String</text><ellipse cx="2181.5" cy="588.8428" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="2190.5" y="591.5">sqlOperator: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2171.5" x2="2456.5" y1="597.8203" y2="597.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="246" x="2190.5" y="612.4551">VectorAdd(left: Expression, right: Expression)</text><polygon fill="#FFFF44" points="2181.5,617.7529,2185.5,621.7529,2181.5,625.7529,2177.5,621.7529" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="2190.5" y="625.4102">nullSafeEval(input1: Any, input2: Any): ArrayData</text><!--class edu.berkeley.cs.rise.opaque.expressions.VectorMultiply--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="99.8203" id="edu.berkeley.cs.rise.opaque.expressions.VectorMultiply" style="stroke: #A80036; stroke-width: 1.5;" width="292" x="2168" y="667"/><ellipse cx="2269.25" cy="683" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2271.7231,689.1431 Q2271.1421,689.4419 2270.5029,689.5913 Q2269.8638,689.7407 2269.1582,689.7407 Q2266.6514,689.7407 2265.3315,688.0889 Q2264.0117,686.437 2264.0117,683.3159 Q2264.0117,680.1865 2265.3315,678.5347 Q2266.6514,676.8828 2269.1582,676.8828 Q2269.8638,676.8828 2270.5112,677.0322 Q2271.1587,677.1816 2271.7231,677.4805 L2271.7231,680.2031 Q2271.0923,679.6221 2270.4988,679.3523 Q2269.9053,679.0825 2269.2744,679.0825 Q2267.9297,679.0825 2267.2449,680.1492 Q2266.5601,681.2158 2266.5601,683.3159 Q2266.5601,685.4077 2267.2449,686.4744 Q2267.9297,687.541 2269.2744,687.541 Q2269.9053,687.541 2270.4988,687.2712 Q2271.0923,687.0015 2271.7231,686.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="2289.75" y="687.5352">VectorMultiply</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2169" x2="2459" y1="699" y2="699"/><ellipse cx="2179" cy="710.9775" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="2188" y="713.6348">dataType: DataType</text><ellipse cx="2179" cy="723.9326" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="2188" y="726.5898">inputTypes: Seq[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2169" x2="2459" y1="732.9102" y2="732.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="266" x="2188" y="747.5449">VectorMultiply(left: Expression, right: Expression)</text><polygon fill="#FFFF44" points="2179,752.8428,2183,756.8428,2179,760.8428,2175,756.8428" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="2188" y="760.5">nullSafeEval(input1: Any, input2: Any): ArrayData</text><!--class edu.berkeley.cs.rise.opaque.expressions.VectorSum--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="177.5508" id="edu.berkeley.cs.rise.opaque.expressions.VectorSum" style="stroke: #A80036; stroke-width: 1.5;" width="357" x="2135.5" y="802"/><ellipse cx="2279.25" cy="818" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2281.7231,824.1431 Q2281.1421,824.4419 2280.5029,824.5913 Q2279.8638,824.7407 2279.1582,824.7407 Q2276.6514,824.7407 2275.3315,823.0889 Q2274.0117,821.437 2274.0117,818.3159 Q2274.0117,815.1865 2275.3315,813.5347 Q2276.6514,811.8828 2279.1582,811.8828 Q2279.8638,811.8828 2280.5112,812.0322 Q2281.1587,812.1816 2281.7231,812.4805 L2281.7231,815.2031 Q2281.0923,814.6221 2280.4988,814.3523 Q2279.9053,814.0825 2279.2744,814.0825 Q2277.9297,814.0825 2277.2449,815.1492 Q2276.5601,816.2158 2276.5601,818.3159 Q2276.5601,820.4077 2277.2449,821.4744 Q2277.9297,822.541 2279.2744,822.541 Q2279.9053,822.541 2280.4988,822.2712 Q2281.0923,822.0015 2281.7231,821.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="2299.75" y="822.5352">VectorSum</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2136.5" x2="2491.5" y1="834" y2="834"/><ellipse cx="2146.5" cy="845.9775" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="2155.5" y="848.6348">inputSchema: StructType</text><ellipse cx="2146.5" cy="858.9326" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="2155.5" y="861.5898">bufferSchema: StructType</text><ellipse cx="2146.5" cy="871.8877" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="2155.5" y="874.5449">dataType: DataType</text><ellipse cx="2146.5" cy="884.8428" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="2155.5" y="887.5">deterministic: Boolean</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2136.5" x2="2491.5" y1="893.8203" y2="893.8203"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2143.5" y="902.7979"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="292" x="2155.5" y="908.4551">addArray(agg: Array[Double], arr: Array[Double]): Unit</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2143.5" y="915.7529"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="327" x="2155.5" y="921.4102">ensureArraySize(agg: Array[Double], size: Int): Array[Double]</text><ellipse cx="2146.5" cy="931.708" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="260" x="2155.5" y="934.3652">initialize(buffer: MutableAggregationBuffer): Unit</text><ellipse cx="2146.5" cy="944.6631" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="315" x="2155.5" y="947.3203">update(buffer: MutableAggregationBuffer, input: Row): Unit</text><ellipse cx="2146.5" cy="957.6182" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="331" x="2155.5" y="960.2754">merge(buffer1: MutableAggregationBuffer, buffer2: Row): Unit</text><ellipse cx="2146.5" cy="970.5732" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="2155.5" y="973.2305">evaluate(buffer: Row): Array[Double]</text><!--class edu.xjtu.cs.cyx.qshield.QShieldUtils--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="119.041" id="edu.xjtu.cs.cyx.qshield.QShieldUtils" style="stroke: #A80036; stroke-width: 1.5;" width="313" x="746" y="1216.5"/><ellipse cx="864.75" cy="1235.6328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M864.3633,1231.7153 Q863.4253,1231.7153 862.9937,1232.7156 Q862.562,1233.7158 862.562,1235.9487 Q862.562,1238.1733 862.9937,1239.1736 Q863.4253,1240.1738 864.3633,1240.1738 Q865.3096,1240.1738 865.7412,1239.1736 Q866.1729,1238.1733 866.1729,1235.9487 Q866.1729,1233.7158 865.7412,1232.7156 Q865.3096,1231.7153 864.3633,1231.7153 Z M860.0137,1235.9487 Q860.0137,1232.7695 861.1135,1231.1426 Q862.2134,1229.5156 864.3633,1229.5156 Q866.5215,1229.5156 867.6213,1231.1426 Q868.7212,1232.7695 868.7212,1235.9487 Q868.7212,1239.1196 867.6213,1240.7466 Q866.5215,1242.3735 864.3633,1242.3735 Q862.2134,1242.3735 861.1135,1240.7466 Q860.0137,1239.1196 860.0137,1235.9487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="893.75" y="1233.1016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="885.25" y="1247.2344">QShieldUtils</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="747" x2="1058" y1="1254.7656" y2="1254.7656"/><ellipse cx="757" cy="1266.7432" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="766" y="1269.4004">qshieldHome: String</text><ellipse cx="757" cy="1279.6982" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="766" y="1282.3555">eid: Long</text><ellipse cx="757" cy="1292.6533" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="766" y="1295.3105">emptyBlock: Block</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="747" x2="1058" y1="1301.6309" y2="1301.6309"/><ellipse cx="757" cy="1313.6084" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="287" x="766" y="1316.2656">initQShieldSQLContext(sqlContext: SQLContext): Unit</text><ellipse cx="757" cy="1326.5635" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="271" x="766" y="1329.2207">concatQEncryptedBlocks(blocks: Seq[Block]): Block</text><!--class edu.xjtu.cs.cyx.qshield.QOwnerStuber--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="106.0859" id="edu.xjtu.cs.cyx.qshield.QOwnerStuber" style="stroke: #A80036; stroke-width: 1.5;" width="648" x="38" y="1223"/><ellipse cx="316.25" cy="1242.1328" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M315.8633,1238.2153 Q314.9253,1238.2153 314.4937,1239.2156 Q314.062,1240.2158 314.062,1242.4487 Q314.062,1244.6733 314.4937,1245.6736 Q314.9253,1246.6738 315.8633,1246.6738 Q316.8096,1246.6738 317.2412,1245.6736 Q317.6729,1244.6733 317.6729,1242.4487 Q317.6729,1240.2158 317.2412,1239.2156 Q316.8096,1238.2153 315.8633,1238.2153 Z M311.5137,1242.4487 Q311.5137,1239.2695 312.6135,1237.6426 Q313.7134,1236.0156 315.8633,1236.0156 Q318.0215,1236.0156 319.1213,1237.6426 Q320.2212,1239.2695 320.2212,1242.4487 Q320.2212,1245.6196 319.1213,1247.2466 Q318.0215,1248.8735 315.8633,1248.8735 Q313.7134,1248.8735 312.6135,1247.2466 Q311.5137,1245.6196 311.5137,1242.4487 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="353.25" y="1239.6016">«Object»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="336.75" y="1253.7344">QOwnerStuber</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="685" y1="1261.2656" y2="1261.2656"/><ellipse cx="49" cy="1273.2432" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="58" y="1275.9004">qsp: QSP</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="685" y1="1282.2207" y2="1282.2207"/><ellipse cx="49" cy="1294.1982" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="58" y="1296.8555">initRA(sqlContext: SQLContext): Unit</text><ellipse cx="49" cy="1307.1533" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="622" x="58" y="1309.8105">dataOut(sqlContext: SQLContext, srcFilePath: String, tableName: String, schema: StructType, numPartitions: Int): Unit</text><ellipse cx="49" cy="1320.1084" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="58" y="1322.7656">getSk(): Array[Byte]</text><!--class edu.berkeley.cs.rise.opaque.execution.SGXEnclave--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="48" id="edu.berkeley.cs.rise.opaque.execution.SGXEnclave" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="2265" y="1079"/><ellipse cx="2280" cy="1095" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2282.4731,1101.1431 Q2281.8921,1101.4419 2281.2529,1101.5913 Q2280.6138,1101.7407 2279.9082,1101.7407 Q2277.4014,1101.7407 2276.0815,1100.0889 Q2274.7617,1098.437 2274.7617,1095.3159 Q2274.7617,1092.1865 2276.0815,1090.5347 Q2277.4014,1088.8828 2279.9082,1088.8828 Q2280.6138,1088.8828 2281.2612,1089.0322 Q2281.9087,1089.1816 2282.4731,1089.4805 L2282.4731,1092.2031 Q2281.8423,1091.6221 2281.2488,1091.3523 Q2280.6553,1091.0825 2280.0244,1091.0825 Q2278.6797,1091.0825 2277.9949,1092.1492 Q2277.3101,1093.2158 2277.3101,1095.3159 Q2277.3101,1097.4077 2277.9949,1098.4744 Q2278.6797,1099.541 2280.0244,1099.541 Q2280.6553,1099.541 2281.2488,1099.2712 Q2281.8423,1099.0015 2282.4731,1098.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="66" x="2294" y="1099.5352">SGXEnclave</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2266" x2="2362" y1="1111" y2="1111"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2266" x2="2362" y1="1119" y2="1119"/><!--class edu.berkeley.cs.rise.opaque.logical.ConvertToOpaqueOperators--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="48" id="edu.berkeley.cs.rise.opaque.logical.ConvertToOpaqueOperators" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="2216.5" y="1285"/><ellipse cx="2231.5" cy="1301" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2233.9731,1307.1431 Q2233.3921,1307.4419 2232.7529,1307.5913 Q2232.1138,1307.7407 2231.4082,1307.7407 Q2228.9014,1307.7407 2227.5815,1306.0889 Q2226.2617,1304.437 2226.2617,1301.3159 Q2226.2617,1298.1865 2227.5815,1296.5347 Q2228.9014,1294.8828 2231.4082,1294.8828 Q2232.1138,1294.8828 2232.7612,1295.0322 Q2233.4087,1295.1816 2233.9731,1295.4805 L2233.9731,1298.2031 Q2233.3423,1297.6221 2232.7488,1297.3523 Q2232.1553,1297.0825 2231.5244,1297.0825 Q2230.1797,1297.0825 2229.4949,1298.1492 Q2228.8101,1299.2158 2228.8101,1301.3159 Q2228.8101,1303.4077 2229.4949,1304.4744 Q2230.1797,1305.541 2231.5244,1305.541 Q2232.1553,1305.541 2232.7488,1305.2712 Q2233.3423,1305.0015 2233.9731,1304.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="163" x="2245.5" y="1305.5352">ConvertToOpaqueOperators</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2217.5" x2="2410.5" y1="1317" y2="1317"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2217.5" x2="2410.5" y1="1325" y2="1325"/><!--class edu.berkeley.cs.rise.opaque.logical.EncryptLocalRelation--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="48" id="edu.berkeley.cs.rise.opaque.logical.EncryptLocalRelation" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="2239" y="1202"/><ellipse cx="2254" cy="1218" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2256.4731,1224.1431 Q2255.8921,1224.4419 2255.2529,1224.5913 Q2254.6138,1224.7407 2253.9082,1224.7407 Q2251.4014,1224.7407 2250.0815,1223.0889 Q2248.7617,1221.437 2248.7617,1218.3159 Q2248.7617,1215.1865 2250.0815,1213.5347 Q2251.4014,1211.8828 2253.9082,1211.8828 Q2254.6138,1211.8828 2255.2612,1212.0322 Q2255.9087,1212.1816 2256.4731,1212.4805 L2256.4731,1215.2031 Q2255.8423,1214.6221 2255.2488,1214.3523 Q2254.6553,1214.0825 2254.0244,1214.0825 Q2252.6797,1214.0825 2251.9949,1215.1492 Q2251.3101,1216.2158 2251.3101,1218.3159 Q2251.3101,1220.4077 2251.9949,1221.4744 Q2252.6797,1222.541 2254.0244,1222.541 Q2254.6553,1222.541 2255.2488,1222.2712 Q2255.8423,1222.0015 2256.4731,1221.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="2268" y="1222.5352">EncryptLocalRelation</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2240" x2="2388" y1="1234" y2="1234"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2240" x2="2388" y1="1242" y2="1242"/><!--class edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="48" id="edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="828" y="85"/><ellipse cx="843" cy="101" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M845.4731,107.1431 Q844.8921,107.4419 844.2529,107.5913 Q843.6138,107.7407 842.9082,107.7407 Q840.4014,107.7407 839.0815,106.0889 Q837.7617,104.437 837.7617,101.3159 Q837.7617,98.1865 839.0815,96.5347 Q840.4014,94.8828 842.9082,94.8828 Q843.6138,94.8828 844.2612,95.0322 Q844.9087,95.1816 845.4731,95.4805 L845.4731,98.2031 Q844.8423,97.6221 844.2488,97.3523 Q843.6553,97.0825 843.0244,97.0825 Q841.6797,97.0825 840.9949,98.1492 Q840.3101,99.2158 840.3101,101.3159 Q840.3101,103.4077 840.9949,104.4744 Q841.6797,105.541 843.0244,105.541 Q843.6553,105.541 844.2488,105.2712 Q844.8423,105.0015 845.4731,104.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="857" y="105.5352">QBigDataBenchmark</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="829" x2="976" y1="117" y2="117"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="829" x2="976" y1="125" y2="125"/><!--class edu.xjtu.cs.cyx.qshield.execution.QShieldSGXEnclave--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="48" id="edu.xjtu.cs.cyx.qshield.execution.QShieldSGXEnclave" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="1504.5" y="1252"/><ellipse cx="1519.5" cy="1268" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1521.9731,1274.1431 Q1521.3921,1274.4419 1520.7529,1274.5913 Q1520.1138,1274.7407 1519.4082,1274.7407 Q1516.9014,1274.7407 1515.5815,1273.0889 Q1514.2617,1271.437 1514.2617,1268.3159 Q1514.2617,1265.1865 1515.5815,1263.5347 Q1516.9014,1261.8828 1519.4082,1261.8828 Q1520.1138,1261.8828 1520.7612,1262.0322 Q1521.4087,1262.1816 1521.9731,1262.4805 L1521.9731,1265.2031 Q1521.3423,1264.6221 1520.7488,1264.3523 Q1520.1553,1264.0825 1519.5244,1264.0825 Q1518.1797,1264.0825 1517.4949,1265.1492 Q1516.8101,1266.2158 1516.8101,1268.3159 Q1516.8101,1270.4077 1517.4949,1271.4744 Q1518.1797,1272.541 1519.5244,1272.541 Q1520.1553,1272.541 1520.7488,1272.2712 Q1521.3423,1272.0015 1521.9731,1271.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="1533.5" y="1272.5352">QShieldSGXEnclave</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1505.5" x2="1644.5" y1="1284" y2="1284"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1505.5" x2="1644.5" y1="1292" y2="1292"/><!--class edu.xjtu.cs.cyx.qshield.logical.ACPolicyApplyEncryptedBlockRDD--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="48" id="edu.xjtu.cs.cyx.qshield.logical.ACPolicyApplyEncryptedBlockRDD" style="stroke: #A80036; stroke-width: 1.5;" width="227" x="1461.5" y="1375"/><ellipse cx="1476.5" cy="1391" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1478.9731,1397.1431 Q1478.3921,1397.4419 1477.7529,1397.5913 Q1477.1138,1397.7407 1476.4082,1397.7407 Q1473.9014,1397.7407 1472.5815,1396.0889 Q1471.2617,1394.437 1471.2617,1391.3159 Q1471.2617,1388.1865 1472.5815,1386.5347 Q1473.9014,1384.8828 1476.4082,1384.8828 Q1477.1138,1384.8828 1477.7612,1385.0322 Q1478.4087,1385.1816 1478.9731,1385.4805 L1478.9731,1388.2031 Q1478.3423,1387.6221 1477.7488,1387.3523 Q1477.1553,1387.0825 1476.5244,1387.0825 Q1475.1797,1387.0825 1474.4949,1388.1492 Q1473.8101,1389.2158 1473.8101,1391.3159 Q1473.8101,1393.4077 1474.4949,1394.4744 Q1475.1797,1395.541 1476.5244,1395.541 Q1477.1553,1395.541 1477.7488,1395.2712 Q1478.3423,1395.0015 1478.9731,1394.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="195" x="1490.5" y="1395.5352">ACPolicyApplyEncryptedBlockRDD</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1462.5" x2="1687.5" y1="1407" y2="1407"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1462.5" x2="1687.5" y1="1415" y2="1415"/><!--class edu.xjtu.cs.cyx.qshield.logical.ConvertToQShieldOperators--><rect fill="#FEFECE" filter="url(#f1kqlsa0szsuom)" height="48" id="edu.xjtu.cs.cyx.qshield.logical.ConvertToQShieldOperators" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="1479" y="1458"/><ellipse cx="1494" cy="1474" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1496.4731,1480.1431 Q1495.8921,1480.4419 1495.2529,1480.5913 Q1494.6138,1480.7407 1493.9082,1480.7407 Q1491.4014,1480.7407 1490.0815,1479.0889 Q1488.7617,1477.437 1488.7617,1474.3159 Q1488.7617,1471.1865 1490.0815,1469.5347 Q1491.4014,1467.8828 1493.9082,1467.8828 Q1494.6138,1467.8828 1495.2612,1468.0322 Q1495.9087,1468.1816 1496.4731,1468.4805 L1496.4731,1471.2031 Q1495.8423,1470.6221 1495.2488,1470.3523 Q1494.6553,1470.0825 1494.0244,1470.0825 Q1492.6797,1470.0825 1491.9949,1471.1492 Q1491.3101,1472.2158 1491.3101,1474.3159 Q1491.3101,1476.4077 1491.9949,1477.4744 Q1492.6797,1478.541 1494.0244,1478.541 Q1494.6553,1478.541 1495.2488,1478.2712 Q1495.8423,1478.0015 1496.4731,1477.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="1508" y="1478.5352">ConvertToQShieldOperators</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1480" x2="1670" y1="1490" y2="1490"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1480" x2="1670" y1="1498" y2="1498"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.RA--><path d="M1575,353.87 C1575,343.87 1575,333.86 1575,323.86 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.RA" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1575,318.63,1571,327.63,1575,323.63,1579,327.63,1575,318.63" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.execution.SGXEnclave--><path d="M2031.21,962.6 C2051.32,974.05 2071.31,985.23 2091,996 C2147.62,1026.96 2214.58,1058.58 2260.04,1079.34 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.execution.SGXEnclave" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2264.65,1081.43,2258.1206,1074.0566,2260.1006,1079.3556,2254.8016,1081.3356,2264.65,1081.43" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.expressions.ClosestPoint--><path d="M2031.15,357.54 C2051.1,346.76 2071.1,336.53 2091,327 C2114.32,315.84 2139.91,306.06 2165.17,297.68 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.expressions.ClosestPoint" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2170.21,296.02,2160.4087,295.0536,2165.4637,297.5926,2162.9248,302.6476,2170.21,296.02" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.expressions.DotProduct--><path d="M2031.2,509.92 C2051.4,502.5 2071.41,495.16 2091,488 C2116.81,478.56 2144.33,468.58 2170.9,458.98 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.expressions.DotProduct" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2175.85,457.2,2166.0261,456.4997,2171.1481,458.9007,2168.7472,464.0227,2175.85,457.2" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.expressions.VectorAdd--><path d="M2031.22,611.06 C2078.99,603.93 2124.69,597.11 2164.88,591.11 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.expressions.VectorAdd" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2170.26,590.31,2160.7655,587.692,2165.3155,591.0531,2161.9544,595.6032,2170.26,590.31" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.expressions.VectorMultiply--><path d="M2031.22,702.47 C2078,704.88 2122.8,707.19 2162.37,709.23 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.expressions.VectorMultiply" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2167.67,709.51,2158.8873,705.053,2162.6766,709.2532,2158.4764,713.0425,2167.67,709.51" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.expressions.VectorSum--><path d="M2031.22,809.94 C2065.84,819.9 2099.38,829.55 2130.52,838.51 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.expressions.VectorSum" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2135.5,839.94,2127.9626,833.6007,2130.6962,838.5532,2125.7437,841.2868,2135.5,839.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.logical.ConvertToOpaqueOperators--><path d="M1906.58,1004.13 C1950.55,1053.59 1993.37,1105.39 2031,1157 C2063.81,1202 2045.98,1234.23 2091,1267 C2125.37,1292.02 2170.43,1303.38 2210.97,1308.17 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.logical.ConvertToOpaqueOperators" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2216.4,1308.77,2207.9015,1303.7925,2211.4311,1308.2131,2207.0105,1311.7428,2216.4,1308.77" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.Utils to edu.berkeley.cs.rise.opaque.logical.EncryptLocalRelation--><path d="M1900.85,1004.25 C1961.07,1054.81 2025.67,1103.35 2091,1143 C2135.37,1169.93 2189.91,1190.47 2233.83,1204.39 " fill="none" id="edu.berkeley.cs.rise.opaque.Utils-edu.berkeley.cs.rise.opaque.logical.EncryptLocalRelation" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2238.86,1205.96,2231.4739,1199.445,2234.0901,1204.4605,2229.0747,1207.0768,2238.86,1205.96" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.berkeley.cs.rise.opaque.EncryptedSource to edu.berkeley.cs.rise.opaque.EncryptedScan--><path d="M1911.07,109 C1970.1,109 2030.29,109 2085.5,109 " fill="none" id="edu.berkeley.cs.rise.opaque.EncryptedSource-edu.berkeley.cs.rise.opaque.EncryptedScan" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2090.83,109,2081.83,105,2085.83,109,2081.83,113,2090.83,109" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark to edu.berkeley.cs.rise.opaque.EncryptedSource--><path d="M977.17,109 C1040.51,109 1136.69,109 1233.46,109 " fill="none" id="edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark-edu.berkeley.cs.rise.opaque.EncryptedSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1238.66,109,1229.66,105,1233.66,109,1229.66,113,1238.66,109" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.QOwnerStuber to edu.xjtu.cs.cyx.qshield.QShieldUtils--><path d="M691.61,1276 C710.22,1276 728.43,1276 745.87,1276 " fill="none" id="edu.xjtu.cs.cyx.qshield.QOwnerStuber-edu.xjtu.cs.cyx.qshield.QShieldUtils" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="686.35,1276,695.35,1280,691.35,1276,695.35,1272,686.35,1276" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.QShieldUtils to edu.xjtu.cs.cyx.qshield.execution.QShieldSGXEnclave--><path d="M1059.01,1276 C1197.11,1276 1392.98,1276 1498.93,1276 " fill="none" id="edu.xjtu.cs.cyx.qshield.QShieldUtils-edu.xjtu.cs.cyx.qshield.execution.QShieldSGXEnclave" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1504.22,1276,1495.22,1272,1499.22,1276,1495.22,1280,1504.22,1276" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.QShieldUtils to edu.xjtu.cs.cyx.qshield.logical.ACPolicyApplyEncryptedBlockRDD--><path d="M1059.13,1308.97 C1071.26,1311.4 1083.32,1313.77 1095,1316 C1217.78,1339.45 1358.81,1363.55 1455.88,1379.69 " fill="none" id="edu.xjtu.cs.cyx.qshield.QShieldUtils-edu.xjtu.cs.cyx.qshield.logical.ACPolicyApplyEncryptedBlockRDD" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1461.05,1380.55,1452.8377,1375.1133,1456.1192,1379.7211,1451.5114,1383.0025,1461.05,1380.55" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.QShieldUtils to edu.xjtu.cs.cyx.qshield.logical.ConvertToQShieldOperators--><path d="M954.02,1335.52 C989.38,1372.73 1039.99,1417.85 1095,1441 C1217.75,1492.65 1373.56,1495.84 1473.54,1490.92 " fill="none" id="edu.xjtu.cs.cyx.qshield.QShieldUtils-edu.xjtu.cs.cyx.qshield.logical.ConvertToQShieldOperators" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1478.55,1490.66,1469.3564,1487.1275,1473.5566,1490.9168,1469.7673,1495.117,1478.55,1490.66" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.QShieldUtils to edu.berkeley.cs.rise.opaque.logical.ConvertToOpaqueOperators--><path d="M1059.06,1240.73 C1071.18,1238.83 1083.26,1237.21 1095,1236 C1508.8,1193.24 1626.77,1137.74 2031,1236 C2060.17,1243.09 2062.62,1257.22 2091,1267 C2129.33,1280.21 2172.9,1289.6 2211.22,1296.1 " fill="none" id="edu.xjtu.cs.cyx.qshield.QShieldUtils-edu.berkeley.cs.rise.opaque.logical.ConvertToOpaqueOperators" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2216.35,1296.96,2208.1377,1291.5233,2211.4192,1296.1311,2206.8114,1299.4125,2216.35,1296.96" style="stroke: #A80036; stroke-width: 1.0;"/><!--link edu.xjtu.cs.cyx.qshield.QShieldUtils to edu.berkeley.cs.rise.opaque.Utils--><path d="M970.55,1216.3 C1027.72,1165.4 1114.78,1087.88 1205.14,1007.43 " fill="none" id="edu.xjtu.cs.cyx.qshield.QShieldUtils-edu.berkeley.cs.rise.opaque.Utils" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1208.9,1004.08,1199.5159,1007.0696,1205.163,1007.4018,1204.8308,1013.0489,1208.9,1004.08" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
left to right direction
namespace edu.berkeley.cs.rise.opaque{
  class Utils << (O,orchid) Object>> {
    -perf : Boolean <i><color:grey>default=System.getenv."SGX_PERF"</color></i>
    +eid: Long <i><color:grey>default=0</color></i>
    +GCM_IV_LENGTH: Int <i><color:grey>default=12</color></i>
    +GCM_KEY_LENGTH: Int <i><color:grey>default=16</color></i>
    +GCM_TAG_LENGTH: Int <i><color:grey>default=16</color></i>
    +sharedKey: Array[Byte] <i><color:grey>default="Opaque devel key".getBytes</color></i>
    +attested: Boolean <i><color:grey>default=false</color></i>
    +attesting_getepid: Boolean <i><color:grey>default=false</color></i>
    +attesting_getmsg1: Boolean <i><color:grey>default=false</color></i>
    +attesting_getmsg3: Boolean <i><color:grey>default=false</color></i>
    +attesting_final_ra: Boolean <i><color:grey>default=false</color></i>
    +MaxBlockSize: Int <i><color:grey>default=1000</color></i>
    +emptyBlock: Block
    -jsonSerialize(x: Any): String
    +time[A](desc: String)(f: => A): A
    +logPerf(message: String): Unit
    +retry[T](n: Int)(fn: => T): T
    +timeBenchmark[A](benchmarkAttrs: (String, Any)*)(f: => A): A
    +findLibraryAsResource(libraryName: String): String
    +findResource(resourceName: String): String
    +createTempDir(): File
    +deleteRecursively(file: File): Unit
    +initEnclave(): (SGXEnclave, Long)
    +encrypt(data: Array[Byte]): Array[Byte]
    +decrypt(data: Array[Byte]): Array[Byte]
    +initSQLContext(sqlContext: SQLContext): Unit
    +concatByteArrays(arrays: Array[Array[Byte]]): Array[Byte]
    +splitBytes(bytes: Array[Byte], numSplits: Int): Array[Array[Byte]]
    +ensureCached[T](rdd: RDD[T], storageLevel: StorageLevel): RDD[T]
    +ensureCached[T](rdd: RDD[T]): RDD[T]
    +ensureCached[T](ds: Dataset[T], storageLevel: StorageLevel): Dataset[T]
    +ensureCached[T](ds: Dataset[T]): Dataset[T]
    +force(ds: Dataset[_]): Unit
    +flatbuffersCreateField(builder: FlatBufferBuilder, value: Any, dataType: DataType, isNull: Boolean): Int
    +flatbuffersExtractFieldValue(f: tuix.Field): Any
    +encryptInternalRowsFlatbuffers(rows: Seq[InternalRow], types: Seq[DataType], useEnclave: Boolean): Block
    +decryptBlockFlatbuffers(block: Block): Seq[InternalRow]
    +treeFold[BaseType <: TreeNode[BaseType], B](tree: BaseType)(op: (Seq[B], BaseType) => B): B
    +flatbuffersSerializeExpression(builder: FlatBufferBuilder, expr: Expression, input: Seq[Attribute]): Int
    +serializeFilterExpression(condition: Expression, input: Seq[Attribute]): Array[Byte]
    +serializeProjectList(projectList: Seq[NamedExpression], input: Seq[Attribute]): Array[Byte]
    +serializeSortOrder(sortOrder: Seq[SortOrder], input: Seq[Attribute]): Array[Byte]
    +serializeJoinExpression(joinType: JoinType, leftKeys: Seq[Expression], rightKeys: Seq[Expression], leftSchema: Seq[Attribute], rightSchema: Seq[Attribute]): Array[Byte]
    +serializeAggOp(groupingExpressions: Seq[Expression], aggExpressions: Seq[NamedExpression], input: Seq[Attribute]): Array[Byte]
    +serializeAggExpression(builder: FlatBufferBuilder, e: AggregateExpression, input: Seq[Attribute], aggSchema: Seq[Attribute], concatSchema: Seq[Attribute]): Int
    +concatEncryptedBlocks(blocks: Seq[Block]): Block
  }

  namespace expressions{
    class ClosestPoint{
      +dataType: DataType
      +inputTypes: Seq[]
      ClosestPoint(left: Expression, right: Expression)
      #nullSafeEval(input1: Any, input2: Any): ArrayData
    }
    class DotProduct{
      +dataType: DataType
      +inputTypes: Array[]
      +symbol: String
      +sqlOperator: String
      DotProduct(left: Expression, right: Expression)
      #nullSafeEval(input1: Any, input2: Any): Double
    }
    class VectorAdd{
      +dataType: DataType
      +inputTypes: Array[]
      +symbol: String
      +sqlOperator: String
      VectorAdd(left: Expression, right: Expression)
      #nullSafeEval(input1: Any, input2: Any): ArrayData
    }
    class VectorMultiply{
      +dataType: DataType
      +inputTypes: Seq[]
      VectorMultiply(left: Expression, right: Expression)
      #nullSafeEval(input1: Any, input2: Any): ArrayData
    }
    class VectorSum{
      +inputSchema: StructType
      +bufferSchema: StructType
      +dataType: DataType
      +deterministic: Boolean
      -addArray(agg: Array[Double], arr: Array[Double]): Unit
      -ensureArraySize(agg: Array[Double], size: Int): Array[Double]
      +initialize(buffer: MutableAggregationBuffer): Unit
      +update(buffer: MutableAggregationBuffer, input: Row): Unit
      +merge(buffer1: MutableAggregationBuffer, buffer2: Row): Unit
      +evaluate(buffer: Row): Array[Double]
    }
  }

  class RA << (O,orchid) Object >> {
    +initRA(sc: SparkContext): Unit
  }

  class EncryptedSource{
    +createRelation(sqlContext: SQLContext, parameters: Map[String, String]): BaseRelation
    +createRelation(sqlContext: SQLContext, parameters: Map[String, String], schema: StructType): BaseRelation
    +createRelation(sqlContext: SQLContext, mode: SaveMode, parameters: Map[String, String], data: DataFrame): BaseRelation
  }
  class EncryptedScan{
    +sqlContext: SQLContext
    +needConversion: Boolean
    EncryptedScan(path: String, val schema: StructType)(sparkSession: SparkSession)
    buildBlockedScan(): RDD[Block]
  }
}

namespace edu.xjtu.cs.cyx.qshield{
  class QShieldUtils << (O,orchid) Object >> {
    +qshieldHome: String
    +eid: Long
    +emptyBlock: Block
    +initQShieldSQLContext(sqlContext: SQLContext): Unit
    +concatQEncryptedBlocks(blocks: Seq[Block]): Block
  }
  class QOwnerStuber << (O,orchid) Object >> {
    +qsp: QSP
    +initRA(sqlContext: SQLContext): Unit
    +dataOut(sqlContext: SQLContext, srcFilePath: String, tableName: String, schema: StructType, numPartitions: Int): Unit
    +getSk(): Array[Byte]
  }
}

edu.berkeley.cs.rise.opaque.Utils -r-> edu.berkeley.cs.rise.opaque.RA
edu.berkeley.cs.rise.opaque.Utils - -> edu.berkeley.cs.rise.opaque.execution.SGXEnclave
edu.berkeley.cs.rise.opaque.Utils - -> edu.berkeley.cs.rise.opaque.expressions.ClosestPoint
edu.berkeley.cs.rise.opaque.Utils - -> edu.berkeley.cs.rise.opaque.expressions.DotProduct
edu.berkeley.cs.rise.opaque.Utils - -> edu.berkeley.cs.rise.opaque.expressions.VectorAdd
edu.berkeley.cs.rise.opaque.Utils - -> edu.berkeley.cs.rise.opaque.expressions.VectorMultiply
edu.berkeley.cs.rise.opaque.Utils - -> edu.berkeley.cs.rise.opaque.expressions.VectorSum
edu.berkeley.cs.rise.opaque.Utils - -> edu.berkeley.cs.rise.opaque.logical.ConvertToOpaqueOperators
edu.berkeley.cs.rise.opaque.Utils - -> edu.berkeley.cs.rise.opaque.logical.EncryptLocalRelation
edu.berkeley.cs.rise.opaque.EncryptedSource - -> edu.berkeley.cs.rise.opaque.EncryptedScan
edu.xjtu.cs.cyx.qshield.benchmark.QBigDataBenchmark - -> edu.berkeley.cs.rise.opaque.EncryptedSource

edu.xjtu.cs.cyx.qshield.QShieldUtils -u-> edu.xjtu.cs.cyx.qshield.QOwnerStuber
edu.xjtu.cs.cyx.qshield.QShieldUtils - -> edu.xjtu.cs.cyx.qshield.execution.QShieldSGXEnclave
edu.xjtu.cs.cyx.qshield.QShieldUtils - -> edu.xjtu.cs.cyx.qshield.logical.ACPolicyApplyEncryptedBlockRDD
edu.xjtu.cs.cyx.qshield.QShieldUtils - -> edu.xjtu.cs.cyx.qshield.logical.ConvertToQShieldOperators
edu.xjtu.cs.cyx.qshield.QShieldUtils - -> edu.berkeley.cs.rise.opaque.logical.ConvertToOpaqueOperators
edu.xjtu.cs.cyx.qshield.QShieldUtils - -> edu.berkeley.cs.rise.opaque.Utils
@enduml

PlantUML version 1.2018.14(Sat Dec 22 00:33:16 CST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 17.0.5+9-LTS-191
Operating System: Mac OS X
OS Version: 12.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>